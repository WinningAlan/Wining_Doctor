(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76edf258"],{1032:function(e,t,a){},"11b3":function(e,t,a){},"12c8":function(e,t,a){},2016:function(e,t,a){},"31e5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"right-start","popper-class":"my-keypad",width:"130","visible-arrow":!1,trigger:"focus"}},[a("ul",{staticClass:"num-list"},e._l(e.numList,function(t){return a("li",{key:t,on:{click:function(a){e.keyClick(t)}}},[e._v(e._s(t))])}),0),e._t("reference",null,{slot:"reference"})],2)},s=[],o={name:"myKeypad",props:{value:{required:!0},focusIndex:{required:!0}},data:function(){return{numList:[7,8,9,4,5,6,1,2,3,"C",0,"←"]}},methods:{keyClick:function(e){console.log(this.value,this.focusIndex);var t=void 0===this.value?"":this.value+"",a=this.focusIndex>=t.length?t.length:this.focusIndex;if(a=void 0===a?0:a,console.log(a,t,e,"←"===e,"stree"),"C"===e)this.$emit("update:value",void 0);else if("←"===e){if(console.log(!a,a,"dd",t.substring(0,a-1),t.substring(a,t.length),t),!a)return;t=t.substring(0,a-1)+t.substring(a,t.length),a-=1,a=a<0?0:a,t=t||void 0,this.$emit("update:focusIndex",a),this.$emit("update:value",t)}else t=t.substring(0,a)+e+t.substring(a,t.length),this.$emit("update:focusIndex",a+1),this.$emit("update:value",t)}}},r=o,n=(a("75bc"),a("2877")),c=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=c.exports},"72be":function(e,t,a){},"75bc":function(e,t,a){"use strict";var i=a("ee75"),s=a.n(i);s.a},7813:function(e,t,a){"use strict";var i=a("b1da"),s=a.n(i);s.a},"85ea":function(e,t,a){"use strict";var i=a("2016"),s=a.n(i);s.a},b1da:function(e,t,a){},b4f7:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__),C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("53ca"),C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("be94"),_myKeypad_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("31e5"),vuex__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2f62"),regPow=/[A-Za-z0-9]+[\.]?[A-Za-z0-9]*\^[-]?[\d]+[\.]?[\d]*/g,regSqrt=/√\([\S]+\)/g;__webpack_exports__["a"]={name:"bodySurfaceArea",components:{myKeypad:_myKeypad_vue__WEBPACK_IMPORTED_MODULE_6__["a"]},props:{formulaData:{type:Object,default:function(){return{}}}},data:function(){return{inputData:{},focusIndex:{}}},created:function(){},mounted:function(){this.inputData.sex=this.patientMsg.PatGenderCode||1,this.inputData.age=this.patientMsg.Age?parseFloat(this.patientMsg.Age):1,this.inputData=Object(C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__["a"])({},this.inputData)},computed:Object(C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_7__["b"])({patientMsg:"public/GET_PATIENTMSG"}),{resultData:function resultData(){var _this=this,obj={},rulsData=this.formulaData.formulaList,_loop=function _loop(r){var ruls=rulsData[r];_this.inputData[r]=_this.inputData[r]?_this.inputData[r]:void 0;var off=!0;for(var key in _this.inputData)off=!1,ruls=ruls.replace(new RegExp(key,"g"),void 0===_this.inputData[key]?NaN:_this.inputData[key]);if(off)return{v:obj};if(ruls=ruls.replace(/[a-zA-Z]+/g,NaN),ruls.indexOf("√")>-1){var sqrtArr=_this.getStr(ruls,regSqrt);sqrtArr.forEach(function(e){try{var _r=e.replace("√","");_r=eval(_r);var n=Math.sqrt(_r);ruls=ruls.replace(e,n)}catch(error){_this.$msg.warning("计算公式格式错误，请重新设置！")}})}if(ruls.indexOf("^")>-1){var powArr=_this.getStr(ruls,regPow);powArr.forEach(function(e){var t=e.slice(0,e.indexOf("^")),a=e.slice(e.indexOf("^")+1);console.log(t,a,"exponent");var i=Math.pow(t,a);ruls=ruls.replace(e,i)}),console.log(ruls,"ruls")}try{obj[r]=eval(ruls),_this.inputData[r]=obj[r]=isNaN(obj[r])?void 0:parseFloat(obj[r].toFixed(3))}catch(error){_this.$msg.warning("计算公式格式错误，请重新设置！"),console.log(ruls,"计算公式格式错误，请重新设置！")}};for(var r in rulsData){var _ret=_loop(r);if("object"===Object(C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__["a"])(_ret))return _ret.v}return console.log(obj),obj}}),methods:{getResult:function(){var e=this,t=!0,a="";return Object.keys(this.resultData).forEach(function(i){var s=e.resultData[i];if(!s)return t=!1;e.formulaData.itemList.forEach(function(e){e.value===i&&(a+="".concat(e.label,"：").concat(s,","))})}),t?a.substring(0,a.length-1):(this.$msg.warning("无可插入的数据！"),!1)},reset:function(){for(var e in this.inputData)this.inputData.hasOwnProperty(e)&&"age"!==e&&"sex"!==e&&(this.inputData[e]=void 0);this.inputData.sex=this.patientMsg.PatGenderCode||1,this.inputData.age=this.patientMsg.Age?parseFloat(this.patientMsg.Age):1},getFocusIndex:function(e,t){console.log(t.target.selectionStart),this.focusIndex[e]=t.target.selectionStart,this.focusIndex=Object(C_Users_winning_Desktop_Doctor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__["a"])({},this.focusIndex),console.log(this.focusIndex[e],e)},getStr:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.exec(e);return i?(a.push(i[0]),this.getStr(e,t,a)):a}}}},bb33:function(e,t,a){"use strict";var i=a("bef8"),s=a.n(i);s.a},bef8:function(e,t,a){},bf37:function(e,t,a){},ca52:function(e,t,a){"use strict";var i=a("12c8"),s=a.n(i);s.a},cc3d:function(e,t,a){"use strict";var i=a("11b3"),s=a.n(i);s.a},e0e4:function(e,t,a){"use strict";var i=a("72be"),s=a.n(i);s.a},e9c5:function(e,t,a){"use strict";var i=a("bf37"),s=a.n(i);s.a},ec73:function(e,t,a){"use strict";var i=a("1032"),s=a.n(i);s.a},ee75:function(e,t,a){},fc74:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"medical",staticClass:"medical-history"},[a("el-radio-group",{attrs:{fill:"#0071E7"},on:{change:e.getMedicalList},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-radio-button",{attrs:{label:1}},[e._v("当前病历")]),a("el-radio-button",{attrs:{label:2}},[e._v("历史病历")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.activeName,expression:"activeName===1"}],staticClass:"medical-history-now"},[a("myTabs",{staticClass:"left-tree",attrs:{activeName:e.activeTab,tabsList:e.tabsList,tabChange:e.tabChange},on:{"update:activeName":function(t){e.activeTab=t}}},[a("div",{attrs:{slot:"1"},slot:"1"},[a("p",{staticClass:"tabs-button"},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.checkAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e.isFiles?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"归档",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"archive"},on:{click:e.putEmrArchiving}})],1):e._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"打印",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"print"},on:{click:function(t){e.print("list")}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"新增",placement:"top"}},[e.isFiles?a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"add"},on:{click:function(t){e.showAlter("","templateData")}}}):e._e()],1)],1),a("medicalNowTree",{ref:"medicalHistoryNow",attrs:{callBack:e.nodeClick,"show-checkbox":"","default-expanded-keys":e.defaultExpanded.medicalHistoryNow,treeData:e.medicalNowList,children:"MedicalRecordInfos",type:"medicalHistoryNow"},on:{"check-change":e.checkChange}})],1),a("div",{attrs:{slot:"2"},slot:"2"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{input:e.searchTreeData},model:{value:e.treeName,callback:function(t){e.treeName="string"===typeof t?t.trim():t},expression:"treeName"}})],1),a("div",{staticClass:"tree-paragraph-list cl"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"删除",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"del"},on:{click:e.delParagraph}})],1),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("p",[e._v("模板分类名称：")]),a("el-input",{attrs:{placeholder:"请输入模板分类名称",size:"small"},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.addGroup(!1)}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addGroup(!0)}}},[e._v("确定")])],1),a("el-tooltip",{staticClass:"item",attrs:{slot:"reference",effect:"dark","open-delay":400,content:"新增",placement:"top"},slot:"reference"},[a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"add"}})],1)],1)],1),a("medicalNowTree",{ref:"paragraph",staticClass:"paragraph",attrs:{"default-expanded-keys":e.defaultExpanded.paragraph,callBack:e.nodeClick,treeData:e.paragraphList,children:"MedicalRecordInfos",type:"paragraph"}})],1)]),a("div",{staticClass:"medical-history-content"},[a("div",{staticClass:"content-top cl"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"打印",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",class:{disabled:!(3!==e.activeNodeData.medicalHistoryNow.Status)},attrs:{iconClass:"print"},on:{click:function(t){3!==e.activeNodeData.medicalHistoryNow.Status&&e.print("medicalNow",e.activeNodeData.medicalHistoryNow.Id)}}})],1),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:1===e.activeNodeData.medicalHistoryNow.Status,expression:"activeNodeData.medicalHistoryNow.Status===1"}],staticClass:"item",class:{disabled:e.isDisabled},attrs:{effect:"dark","open-delay":400,content:"作废",placement:"top"}},[e.isFiles?a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"cancellation"},on:{click:function(t){!e.isDisabled&&e.putEmrInvalid()}}}):e._e()],1),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:3===e.activeNodeData.medicalHistoryNow.Status,expression:"activeNodeData.medicalHistoryNow.Status===3"}],staticClass:"item",class:{disabled:e.isDisabled},attrs:{effect:"dark","open-delay":400,content:"取消作废",placement:"top"}},[e.isFiles?a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"revocation"},on:{click:function(t){!e.isDisabled&&e.putEmrRestore()}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"保存",placement:"top"}},[e.isFiles?a("svg-icon",{staticClass:"my-icon",class:{disabled:1!==e.activeNodeData.medicalHistoryNow.Status||e.isDisabled},attrs:{iconClass:"save"},on:{click:function(t){1===e.activeNodeData.medicalHistoryNow.Status&&!e.isDisabled&&e.medicalOperation("save")}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"另存为模板",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",class:{disabled:!(3!==e.activeNodeData.medicalHistoryNow.Status)},attrs:{iconClass:"saveAs"},on:{click:function(t){3!==e.activeNodeData.medicalHistoryNow.Status&&e.medicalOperation("saveTemplate")}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"另存为段落",placement:"top"}},[a("svg-icon",{staticClass:"my-icon big",class:{disabled:!(3!==e.activeNodeData.medicalHistoryNow.Status)},attrs:{iconClass:"paragraph"},on:{click:function(t){3!==e.activeNodeData.medicalHistoryNow.Status&&e.medicalOperation("saveSection")}}})],1),e.isFiles?a("mySelect",{attrs:{selectData:e.citeData,disabled:1!==e.activeNodeData.medicalHistoryNow.Status||e.isDisabled,itemClick:e.showAlter,type:"citeData"}}):e._e(),e.isFiles?a("mySelect",{attrs:{disabled:1!==e.activeNodeData.medicalHistoryNow.Status||e.isDisabled,selectData:e.toolData,itemClick:e.showAlter,type:"toolData"}}):e._e()],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"content-center",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, .6)"}},[a("iframe",{ref:"iframe",staticClass:"iframeStyle",attrs:{src:e.medicalNow,scrolling:"yes",frameborder:"0",id:"medicalNow"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.activeNodeData.medicalHistoryNow.InHospitalId,expression:"activeNodeData.medicalHistoryNow.InHospitalId"}],staticClass:"content-bottom"},[2===e.activeNodeData.medicalHistoryNow.Status?a("p",{staticClass:"right"},[e._v("\n          归档：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryNow.UpdateUserName)+" "+e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryNow.UpdateTime)))])]):e._e(),a("p",{staticClass:"right"},[e._v("\n          最后修改：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryNow.UpdateUserName||e.activeNodeData.medicalHistoryNow.CreateUserName)+" "+e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryNow.UpdateTime||e.activeNodeData.medicalHistoryNow.CreateTime)))])]),a("p",{staticClass:"right"},[e._v("\n          创建：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryNow.CreateUserName))]),e.activeNodeData.medicalHistoryNow._isEdit?a("el-date-picker",{directives:[{name:"focus",rawName:"v-focus",value:!0,expression:"true"}],staticClass:"time",attrs:{clearable:!1,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.changeTime,blur:function(t){e.activeNodeData.medicalHistoryNow._isEdit=!1}},model:{value:e.activeNodeData.medicalHistoryNow.CreateTime,callback:function(t){e.$set(e.activeNodeData.medicalHistoryNow,"CreateTime",t)},expression:"activeNodeData.medicalHistoryNow.CreateTime"}}):a("span",{staticClass:"time",on:{dblclick:function(t){1===e.activeNodeData.medicalHistoryNow.Status&&!e.isDisabled&&e.$set(e.activeNodeData.medicalHistoryNow,"_isEdit",!0)}}},[e._v(e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryNow.CreateTime)))])],1),a("p",{staticClass:"right"},[e._v("\n          状态：\n          "),a("span",[e._v(e._s(1===e.activeNodeData.medicalHistoryNow.Status?"已保存":2===e.activeNodeData.medicalHistoryNow.Status?"已归档":"已作废"))])])])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.activeName,expression:"activeName===2"}],staticClass:"medical-history-now medical-history-old"},[a("div",{staticClass:"left-tree"},[a("medicalNowTree",{ref:"medicalHistoryOld",attrs:{callBack:e.nodeClick,"default-expanded-keys":e.defaultExpanded.medicalHistoryOld,"show-checkbox":"",treeData:e.medicalOldList,children:"MedicalRecordInfos",type:"medicalHistoryOld"},scopedSlots:e._u([{key:"medicalHistoryOld",fn:function(t){var i=t.scope;return a("el-tooltip",{attrs:{effect:"dark","open-delay":400,content:"打印",placement:"top"}},[a("svg-icon",{staticClass:"my-icon hidden",attrs:{iconClass:"print"},on:{click:function(t){t.stopPropagation(),e.print("old",i)}}})],1)}}])})],1),a("div",{staticClass:"medical-history-content"},[a("div",{staticClass:"content-top cl"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"打印",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",class:{disabled:!e.activeNodeData.medicalHistoryOld.Id},attrs:{iconClass:"print"},on:{click:function(t){e.activeNodeData.medicalHistoryOld.Id&&e.print("medicalOld",e.activeNodeData.medicalHistoryOld.Id)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"另存为模板",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",class:{disabled:!e.activeNodeData.medicalHistoryOld.Id},attrs:{iconClass:"saveAs"},on:{click:function(t){e.activeNodeData.medicalHistoryOld.Id&&e.medicalOperation("saveTemplate","medicalOld")}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"另存为段落",placement:"top"}},[a("svg-icon",{staticClass:"my-icon big",class:{disabled:!e.activeNodeData.medicalHistoryOld.Id},attrs:{iconClass:"paragraph"},on:{click:function(t){e.activeNodeData.medicalHistoryOld.Id&&e.medicalOperation("saveSection","medicalOld")}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"复制",placement:"top"}},[e.isFiles?a("svg-icon",{staticClass:"my-icon",class:{disabled:!e.activeNodeData.medicalHistoryOld.Id},attrs:{iconClass:"copy"},on:{click:function(t){e.activeNodeData.medicalHistoryOld.Id&&e.copeMedical(e.activeNodeData.medicalHistoryOld.Id)}}}):e._e()],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"content-center",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, 0.6)"}},[a("iframe",{ref:"iframe",staticClass:"iframeStyle",attrs:{src:e.medicalOld,scrolling:"yes",frameborder:"0",id:"medicalOld"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.activeNodeData.medicalHistoryOld.Id,expression:"activeNodeData.medicalHistoryOld.Id"}],staticClass:"content-bottom"},[2===e.activeNodeData.medicalHistoryOld.Status?a("p",{staticClass:"right"},[e._v("\n          归档：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryOld.UpdateUserName)+" "+e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryOld.UpdateTime)))])]):e._e(),a("p",{staticClass:"right"},[e._v("\n          最后修改：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryOld.UpdateUserName)+" "+e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryOld.UpdateTime)))])]),a("p",{staticClass:"right"},[e._v("\n          创建：\n          "),a("span",[e._v(e._s(e.activeNodeData.medicalHistoryOld.CreateUserName)+" "+e._s(e._f("timeFilter")(e.activeNodeData.medicalHistoryOld.CreateTime)))])]),a("p",{staticClass:"right"},[e._v("\n          状态：\n          "),a("span",[e._v(e._s(1===e.activeNodeData.medicalHistoryOld.Status?"已保存":2===e.activeNodeData.medicalHistoryOld.Status?"已归档":"已作废"))])])])])]),a("myAlter",{attrs:{title:this[e.alterType].name,visible:e.isShow,width:this[e.alterType].width,callback:e.closeAlter,isfooter:!!this[e.alterType].btn.length,btn:this[e.alterType].btn}},[a(this[e.alterType].components,{ref:"aletrData",tag:"component",attrs:{initialize:e.isShow,alterData:this[e.alterType],idList:e.checkArr,teamplateLeveList:e.paragraphList}},[a("el-button",{attrs:{slot:"close"},on:{click:function(t){e.closeAlter(!1)}},slot:"close"},[e._v("取消")])],1)],1)],1)},s=[],o=(a("55dd"),a("2909")),r=(a("a481"),a("2fdb"),a("ac6a"),a("6762"),a("ade3")),n=a("be94"),c=a("566b"),l=a("fdda"),d=function(e,t){var a=t._c;return a("el-popover",{attrs:{placement:"bottom-start",width:"86",trigger:"hover","popper-class":"my-select",disabled:t.props.disabled}},[a("ul",{staticClass:"my-select-list"},t._l(t.props.selectData.list,function(e,i){return a("li",{key:i,on:{click:function(a){t.props.itemClick(e.value,t.props.type)}}},[t._v(t._s(e.text))])}),0),a("span",{staticClass:"my-select-button",class:{disabled:t.props.disabled},attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.props.selectData.name))])])},u=[],p=(a("ec73"),a("2877")),m={},h=Object(p["a"])(m,d,u,!0,null,null,null),f=h.exports,v=a("2f62"),g=a("98ad"),_=a("1b51"),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"templateAlter"},[a("div",{staticClass:"tree-left"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},model:{value:e.treeName,callback:function(t){e.treeName="string"===typeof t?t.trim():t},expression:"treeName"}}),a("p",{staticClass:"cl"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:"删除",placement:"top"}},[a("svg-icon",{staticClass:"my-icon",attrs:{iconClass:"del"},on:{click:e.del}})],1)],1)],1),e.initialize?a("medicalNowTree",{ref:"treeList",staticClass:"treeList",attrs:{"filter-node-method":e.filterNode,"default-expanded-keys":e.expandedKeys,callBack:e.handleNodeClick,treeData:e.treeList,children:"MedList",type:"templateAlter"}}):e._e()],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"template-alter-right",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, 0.6)"}},[a("iframe",{ref:"iframe",staticClass:"iframeStyle",attrs:{src:e.url,scrolling:"yes",frameborder:"0",id:"templateAlter"}})])])},y=[],b=a("c9b7"),D={name:"templateAlter",components:{medicalNowTree:l["a"]},props:["initialize"],data:function(){return{treeName:"",treeList:[],activePrescription:{},expandedKeys:[],url:""}},computed:Object(n["a"])({},Object(v["b"])({patientMsg:"public/GET_PATIENTMSG",user:"public/GET_USER",showLoading:"public/GET_SHOWLOADING",isSignName:"public/GET_ISSIGNNAME",selectArea:"home/GET_SELECTAREA"})),created:function(){this.getTemplateList()},watch:{treeName:function(e){this.$refs.treeList.getNode().filter(e)},initialize:function(e){e&&this.getTemplateList(),this.treeName="",this.activePrescription={}}},methods:{filterNode:function(e,t){return!e||(console.log(t),t.CategoryName&&-1!==t.CategoryName.indexOf(e)||t.TemplateName&&-1!==t.TemplateName.indexOf(e))},handleNodeClick:function(e,t,a){var i=this;this.activePrescription=e,this.expandedKeys=[a],this.$store.commit("public/SET_SHOWLOADING",!0);var s="",o={patientId:this.patientMsg.PatientId,inHospPatId:this.patientMsg.InHouseId,areaType:this.patientMsg.AreaType,templateId:this.activePrescription.Id,oriTemplateId:this.activePrescription.OriTemplateId,createUser:this.user.UserInfo.Id,readOnly:!0,isSignName:!!this.isSignName,originUrl:window.location.protocol+"\\"+window.location.host,objectType:12};for(var r in o)s+="".concat(r,"=").concat(o[r],"&");s=s.substring(0,s.length-1);var n="".concat(URLCONFIG.Emr,"/Nursing/EditPage.aspx?").concat(s);n!=this.url?Object(b["l"])(n).then(function(e){i.url=e}):this.$store.commit("public/SET_SHOWLOADING",!1)},getTemplateList:function(){var e=this;this.$Api.getTemplateList({areaId:this.patientMsg.AreaId}).then(function(t){if(t.Status){var a=t.Data;if(console.log(t.Data,"dada"),e.treeList=[],console.log("data.Per",a.Per),console.log(e.setMealCheck(a.Com),"this.setMealCheck(data.Per)"),a.Per&&a.Per.length&&e.treeList.push({CategoryName:"个人模板",Id:"1",MedList:a.Per}),a.Com&&a.Com.length&&e.treeList.push({CategoryName:"科室模板",Id:"2",MedList:e.setMealCheck(a.Com)}),!e.activePrescription.Id&&e.treeList.length){var i=e.getNodeKey(e.treeList[0],e.treeList[0].Id);e.$nextTick(function(){e.$refs.treeList.currentChange(i.data,i.id)})}}else e.$msg.warning(t.Message)})},getNodeKey:function(e,t){return console.log(e,t),e.hasOwnProperty("MedList")&&e.MedList.length?this.getNodeKey(e.MedList[0],e.Id):{data:e,id:t}},setMealCheck:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++)e[t]["MedList"]=e[t].ChildCategory,e[t].ChildCategory.length&&this.setMealCheck(e[t].ChildCategory);return e},del:function(){var e=this;if(this.activePrescription.ParentId)return this.$msg.info("科室模板不可删除");this.activePrescription.Id&&(console.log("删除个人病历"),this.$Api.delTemplate({templateId:this.activePrescription.Id}).then(function(t){e.$msg[t.Status?"success":"warning"](t.Message),t.Status&&(e.activePrescription={},e.getTemplateList()),console.log(t)})),console.log(this.activePrescription)}}},w=D,C=(a("bb33"),Object(p["a"])(w,N,y,!1,null,"b54dfd7c",null)),I=C.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assistantAlter"},[a("el-radio-group",{attrs:{fill:"#0071E7"},model:{value:e.alterData.activeName,callback:function(t){e.$set(e.alterData,"activeName",t)},expression:"alterData.activeName"}},e._l(e.alterData.list,function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v(e._s(t.text))])}),1),a("div",{staticClass:"assistant-alter-content"},[e.leftNavList[e.alterData.activeName]?a("el-radio-group",{staticClass:"formula-left",model:{value:e.navListActive[e.alterData.activeName],callback:function(t){e.$set(e.navListActive,e.alterData.activeName,t)},expression:"navListActive[alterData.activeName]"}},e._l(e.leftNavList[e.alterData.activeName],function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.value}},[e._v(e._s(t.text))])}),1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.alterData.activeName,expression:"alterData.activeName===1"}],staticClass:"formula-right"},e._l(e.calculatorData,function(t,i){return a("bodySurfaceArea",{directives:[{name:"show",rawName:"v-show",value:e.navListActive[e.alterData.activeName]==i,expression:"navListActive[alterData.activeName]==index"}],key:i,ref:"calculator"+i,refInFor:!0,attrs:{formulaData:t}})}),1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.alterData.activeName,expression:"alterData.activeName===2"}],staticClass:"formula-right no-border"},e._l(e.specificSymbolData,function(t,i){return a("div",{key:i,staticClass:"group-warp"},[a("p",{staticClass:"group-name"},[e._v(e._s(t.groupName))]),a("ul",{staticClass:"item-list"},e._l(t.itemList,function(t,i){return a("li",{key:i,staticClass:"item",class:{active:t===e.specificActive},domProps:{innerHTML:e._s(t)},on:{click:function(a){e.setSpecific(t)}}})}),0)])}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:4===e.alterData.activeName,expression:"alterData.activeName===4"}],ref:"medicalTable",staticClass:"formula-right"},[a("medicalTable",{attrs:{column:e.medicalTableColumns[e.navListActive[4]+"Columns"],tableData:e.medicalTableData[e.navListActive[4]+"Data"]}})],1)],1),a("p",{staticClass:"alter-button"},[e._t("close"),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.insert(e.alterData.activeName)}}},[e._v("插入病历")])],2)],1)},k=[],E=a("31e5"),T=a("2e7f"),S=a("d634"),M=function(e,t){var a=t._c;return a("table",{staticClass:"medicalTable",staticStyle:{width:"97%","border-collapse":"collapse"},attrs:{align:"center",border:"1",width:"97%"}},[a("tr",{attrs:{bgcolor:"#eee"}},t._l(t.props.column,function(e){return a("td",{key:e.value,staticStyle:{padding:"2px 5px"},attrs:{valign:"middle"}},[a("p",{attrs:{align:"center"}},[a("span",[t._v(t._s(e.text))])])])}),0),a("tbody",t._l(t.props.tableData,function(e,i){return a("tr",{key:i},t._l(t.props.column,function(i){return a("td",{key:i.value,staticStyle:{padding:"2px 5px"},attrs:{valign:"middle"}},[a("p",{attrs:{align:"center"}},[a("span",[t._v(t._s(e[i.value]?e[i.value]:" "))])])])}),0)}),0)])},L=[],A={},H=Object(p["a"])(A,M,L,!0,null,null,null),x=H.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bodySurfaceArea"},[a("div",{staticClass:"warp"},[e.formulaData.colName?a("div",{staticClass:"item",staticStyle:{width:"100%"}},e._l(e.formulaData.colName,function(t,i){return a("p",{key:i,staticClass:"bold",style:{width:100/e.formulaData.colName.length+"%"}},[e._v(e._s(t))])}),0):e._e(),e._l(e.formulaData.itemList,function(t,i){return a("div",{key:i,staticClass:"item",style:{width:100/t.col+"%"}},[a("p",{staticClass:"label",style:{width:3===t.col?"140px":""}},[e._v(e._s(t.label?t.label+"：":""))]),"number"===t.type?a("myKeypad",{attrs:{value:e.inputData[t.value],focusIndex:e.focusIndex[t.value]},on:{"update:value":function(a){e.$set(e.inputData,t.value,a)},"update:focusIndex":function(a){e.$set(e.focusIndex,t.value,a)}}},[a("el-input-number",{attrs:{slot:"reference",min:t.min,max:t.max,precision:t.precision,controls:!1},on:{blur:function(a){e.getFocusIndex([t.value],a)}},slot:"reference",model:{value:e.inputData[t.value],callback:function(a){e.$set(e.inputData,t.value,a)},expression:"inputData[item.value]"}})],1):"none"===t.type?a("p",{staticClass:"none"}):"radio"===t.type?a("el-radio-group",{model:{value:e.inputData[t.value],callback:function(a){e.$set(e.inputData,t.value,a)},expression:"inputData[item.value]"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:2}},[e._v("女")])],1):a("p",{staticClass:"result"},[e._v(e._s(e.resultData[t.value]))])],1)})],2),a("p",{staticClass:"reset"},[a("el-button",{on:{click:e.reset}},[e._v("重置")])],1),a("p",{staticClass:"line"}),e.formulaData.remark?a("p",{staticClass:"text"},[e._v("注意："+e._s(e.formulaData.remark))]):e._e(),e.formulaData.formulaText?a("p",{staticClass:"text"},[e._v("\n    计算式：\n    "),e._l(e.formulaData.formulaText,function(t,i){return a("span",{key:i},[e._v(e._s(t))])})],2):e._e()])},$=[],U=a("b4f7"),R=U["a"],j=(a("ca52"),Object(p["a"])(R,P,$,!1,null,"5c1f1ab2",null)),G=j.exports,F={"牙位图":"toothBitmap,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,","月经史":"menstrualHistory,,,","胎心":"fetalHeartTu,,,,,,,"},K={name:"assistantAlter",components:{myKeypad:E["a"],bodySurfaceArea:G,medicalTable:x},props:{alterData:{type:Object,required:!0}},data:function(){return{specificActive:"",specificSymbolData:S["C"],leftNavList:{1:S["k"],4:S["p"]},medicalTableColumns:{recordColumns:T["o"],pathologicReflex6Columns:T["n"],gcsGrade2Columns:T["f"],nutritionGradeColumns:T["m"]},medicalTableData:{recordData:S["z"],pathologicReflex6Data:S["u"],gcsGrade2Data:S["l"],nutritionGradeData:S["t"]},calculatorData:[S["e"],S["d"],S["f"],S["H"],S["w"],S["G"],S["o"],S["F"],S["A"]],navListActive:{1:"0",4:"record"}}},methods:{setSpecific:function(e){this.specificActive=e},insert:function(e){var t=document.getElementById("medicalNow"),a="";switch(e){case 4:a=this.$refs.medicalTable.innerHTML;break;case 2:if(a=this.specificActive,F[a])return void t.contentWindow.postMessage(F[a],window.URLCONFIG.Emr);a="&nbsp;"+a;break;case 1:a="&nbsp;"+this.$refs["calculator"+this.navListActive["1"]][0].getResult();break}a&&t.contentWindow.postMessage({type:"insertHtml",msg:a},window.URLCONFIG.Emr)}}},W=K,B=(a("e0e4"),Object(p["a"])(W,O,k,!1,null,null,null)),q=B.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticClass:"bulk-print",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, 0.6)"}},[a("p",{staticClass:"bulk-print-button cl"},[a("el-button",{attrs:{type:"primary"},on:{click:e.print}},[e._v("打印")]),a("el-checkbox",{on:{change:function(t){e.loading(t)}},model:{value:e.isMerge,callback:function(t){e.isMerge=t},expression:"isMerge"}},[e._v("合并打印")]),a("el-checkbox",{on:{change:e.change},model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}},[e._v("续打")])],1),a("iframe",{ref:"iframe",staticClass:"bulk-print-iframe",attrs:{src:e.url,scrolling:"yes",frameborder:"0",id:"bulkPrint"}})])},z=[],Y={name:"bulkPrint",props:["idList"],data:function(){return{url:"",isMerge:!1,isChecked:!1}},computed:Object(n["a"])({},Object(v["b"])(Object(r["a"])({patientMsg:"public/GET_PATIENTMSG",user:"public/GET_USER",showLoading:"public/GET_SHOWLOADING",selectArea:"home/GET_SELECTAREA"},"showLoading","public/GET_SHOWLOADING"))),watch:{idList:{handler:function(e){this.isMerge=!1,this.isChecked=!1,this.loading(this.isMerge)},immediate:!0},showLoading:function(e){var t=this;!e&&this.isChecked&&setTimeout(function(){t.change()},700)}},methods:{print:function(){var e=this.isChecked?"JumpPrint":"print";document.getElementById("bulkPrint").contentWindow.postMessage(e,window.URLCONFIG.Emr)},change:function(){var e=this.isChecked?"JumpPrintIn":"JumpPrintOut";document.getElementById("bulkPrint").contentWindow.postMessage(e,window.URLCONFIG.Emr)},loading:function(e){var t=this,a=e?15:13,i={patientId:this.patientMsg.PatientId,inHospPatId:this.patientMsg.InHouseId,areaType:this.selectArea.DiagnosisAreaType,createUser:this.user.UserInfo.Id,mark:!0,originUrl:window.location.protocol+"\\"+window.location.host,objectType:a,t:+new Date,documentIds:this.idList};this.$store.commit("public/SET_SHOWLOADING",!0);var s="";for(var o in i)s+="".concat(o,"=").concat(i[o],"&");s=s.substring(0,s.length-1),Object(b["l"])("".concat(URLCONFIG.Emr,"/Nursing/EditPage.aspx?").concat(s)).then(function(e){t.url=e})}}},V=Y,Z=(a("e9c5"),Object(p["a"])(V,J,z,!1,null,"bd2dde82",null)),Q=Z.exports,X=a("9959"),ee=a("3943"),te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teamContent"},[a("div",{staticClass:"teamContentRight"},[a("div",{staticClass:"appendselect"},[a("div",{staticClass:"el-input-group__prepend"},[e._v("模板分类")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"m"},model:{value:e.teamModel.ParentId,callback:function(t){e.$set(e.teamModel,"ParentId",t)},expression:"teamModel.ParentId"}},e._l(e.teamplateLeveList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1),a("div",{staticClass:"appendInput"},[a("el-input",{staticStyle:{width:"365px"},attrs:{placeholder:"请输入内容",size:"m"},model:{value:e.teamModel.Name,callback:function(t){e.$set(e.teamModel,"Name",t)},expression:"teamModel.Name"}},[a("template",{slot:"prepend"},[e._v("模板名称")])],2)],1)])])},ae=[],ie={data:function(){return{teamModel:{Name:"",ParentId:""}}},props:{teamplateLeveList:{type:Array,required:!0}},methods:{getData:function(){if(this.teamModel.ParentId){if(this.teamModel.Name){var e=Object(n["a"])({},this.teamModel);return e}return this.$msg.warning("请填写模板名称"),!1}return this.$msg.warning("请选择模板分类"),!1},clearData:function(){this.teamModel.ParentId=this.teamModel.Name=""}}},se=ie,oe=(a("cc3d"),Object(p["a"])(se,te,ae,!1,null,"0fa0beec",null)),re=oe.exports,ne=["toothBitmap","menstrualHistory","fetalHeartTu"],ce={name:"medicalHistory",components:{myTabs:c["a"],medicalNowTree:l["a"],mySelect:f,myAlter:g["a"],dataReferenceAlter:_["a"],templateAlter:I,assistantAlter:q,bulkPrint:Q,paragraphAlter:re},computed:Object(n["a"])({},Object(v["b"])(Object(r["a"])({patientMsg:"public/GET_PATIENTMSG",user:"public/GET_USER",userName:"public/GET_USERNAME",showLoading:"public/GET_SHOWLOADING",defaultTemplent:"public/GET_DEFAULTTEMPLENT",selectArea:"home/GET_SELECTAREA",caseData:"case/GET_CASEDATA",medicalAddEvent:"public/GET_MEDICALADDEVENT",signName:"public/GET_SIGNNAME",isSignName:"public/GET_ISSIGNNAME",isGetCA:"public/GET_ISGETCA"},"user","public/GET_USER")),{userId:function(){return this.user.UserInfo.Id},editRole:function(){return this.user.TemplateRole||{}}}),created:function(){var e=this;this.citeData=JSON.parse(JSON.stringify(X["a"])),this.getMedicalList(1),this.$store.commit("public/SET_MEDICALADDEVENT",!0),3===this.selectArea.DiagnosisAreaType?this.citeData.list.push({text:"体征观察",value:6}):this.citeData.list.push({text:"护理记录",value:5}),this.isSignName&&(this.caSignOperation=new ee["a"](this,this.signName)),this.$Api.getAllMedicalCategories().then(function(t){if(t.Status){var a=t.Data||[];e.paragraphList=a,console.log(a,"段落")}})},beforeDestroy:function(){clearTimeout(this.timer),window.removeEventListener("message",this.loadOver,!1),this.$store.commit("public/SET_MEDICALADDEVENT",!1),1===this.activeNodeData.medicalHistoryNow.Status&&this.isSave&&this.medicalOperation("realtimesave"),this.isShowMsg=!1},data:function(){return this.copeTime=0,{groupName:"",visible:!1,caSignOperation:{},currentObjData:"",isExamine:!1,checkArr:[],isShow:!1,alterType:"templateData",bulkPrintData:{name:"批量打印预览",width:"1111px",btn:[],components:"bulkPrint"},templateData:{name:"新建病历",width:"1111px",btn:["引用","取消"],components:"templateAlter"},citeData:{},toolData:{name:"病历助手",activeName:1,width:"1300px",components:"assistantAlter",btn:[],list:[{text:"计算器",value:1},{text:"特殊符号",value:2},{text:"插入表格",value:4},{text:"高拍仪",value:5}]},medicalOld:"",medicalNow:"",paragraphList:[],medicalOldList:[],medicalNowList:[],activeNodeData:{medicalHistoryNow:{},medicalHistoryOld:{},paragraph:{},nowDefault:[],oldDefault:[],paragraphDefault:[]},defaultExpanded:{medicalHistoryNow:[],medicalHistoryOld:[],paragraph:[]},activeName:1,tabsList:[{value:"1",label:"当前病历"},{value:"2",label:"段落引用"}],treeName:"",activeTab:"1",isIndeterminate:!1,checkAll:!1,isFiles:!0,isDisabled:!1,currentType:"",currentId:"",adviceList:[],paragraphData:{name:"新建段落",width:"400px",btn:["保存","取消"],components:"paragraphAlter"},cope:{name:"cope",width:"400px",btn:[],components:"paragraphAlter"}}},watch:{treeName:function(e){this.$refs.paragraph.getNode().filter(e)},caseData:{handler:function(e){e&&(console.log(e),e.IsHistory?(this.activeName=2,this.getMedicalList(2)):(this.activeName=1,this.getMedicalList(1)))},deep:!0,immediate:!0},medicalAddEvent:{immediate:!0,handler:function(e){console.log(e,"是否监听事件"),e?(window.removeEventListener("message",this.loadOver,!1),window.addEventListener("message",this.loadOver,!1)):window.removeEventListener("message",this.loadOver,!1)}},isGetCA:function(e){e&&this.currentObjData.Data&&"病历保存"==this.currentObjData.Data[0].Name&&this.caSignOperation.checkData(this.user.UserInfo,this.currentObjData)}},methods:{addGroup:function(e){var t=this;e?this.$Api.addMedicalCategorie({Name:this.groupName,CreateUser:this.user.UserInfo.Id}).then(function(e){t.$msg[e.Status?"success":"warning"](e.Message),e.Status&&(t.visible=!1,t.groupName="",t.tabChange("2"))}):(this.visible=!1,this.groupName="")},delParagraph:function(){var e=this;if(console.log(this.activeNodeData.paragraph,"this.activeNodeData"),!this.activeNodeData.paragraph.Id)return this.$msg.info("请选择需要删除的段落菜单");this.$confirm("该操作将删除段落目录,是否继续","",{type:"warning"}).then(function(){var t="00000000-0000-0000-0000-000000000000",a="00000000-0000-0000-0000-000000000000";e.activeNodeData.paragraph.PersonalMedicalRecordSectionModels?t=e.activeNodeData.paragraph.Id:a=e.activeNodeData.paragraph.Id,e.$Api.delMedicalCategorie({},t,a).then(function(t){e.$msg[t.Status?"success":"warning"](t.Message),t.Status&&(e.activeNodeData.paragraph={},e.tabChange("2"))})}).catch(function(){e.$msg.info("已取消操作")})},searchTreeData:function(){this.tabChange("2")},medicalOperation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medicalNow";if(console.log(this.activeNodeData),console.log(e,this.activeNodeData.medicalHistoryNow.Status,999),this.currentType=e,this.currentId=t,(this.activeNodeData.medicalHistoryNow.Id||"medicalNow"!==t)&&!this.showLoading){if("save"===e&&(this.isShowMsg=!0),"saveSection"===e)return this.alterType="paragraphData",this.isShow=!0,this.BtnLoading=!1,this.paragraphType=e,void(this.paragraphId=t);if("PrintTest"!==e&&"markOut"!==e||(this.isExamine=!this.isExamine),"saveTemplate"===e&&("medicalNow"===t&&this.medicalNow.indexOf("mark=true")>-1||"medicalOld"===t))return document.getElementById(t).contentWindow.postMessage("markOut",window.URLCONFIG.Emr),void setTimeout(function(){document.getElementById(t).contentWindow.postMessage(e,window.URLCONFIG.Emr)});if(console.log(this.activeNodeData.medicalHistoryNow,e,"dfaasfa"),"save"==e&&this.isSignName){var a={Type:"0",Data:[{Name:"病历保存"}],No:this.user.UserInfo.No,UserName:this.user.UserInfo.Name};this.currentId=t,this.currentType=e,this.currentObjData=a,this.caSignOperation.KeyVerify()}else document.getElementById(t).contentWindow.postMessage(e,window.URLCONFIG.Emr)}},handleOperation:function(){if(console.log(this.currentType,this.currentId),"paragraphData"===this.alterType){var e=this.$refs.aletrData.getData();console.log(e,"data",this.paragraphType,this.paragraphId),e.ParentId&&e.Name&&document.getElementById(this.paragraphId).contentWindow.postMessage({type:this.paragraphType,msg:{categoryid:e.ParentId,sectionname:e.Name}},window.URLCONFIG.Emr)}else"cope"===this.alterType?(this.isShowMsg=!1,this.isCope=!0,this.activeNodeData.medicalHistoryNow={},this.loadIframe("cope",this.copeId)):(document.getElementById(this.currentId).contentWindow.postMessage(this.currentType,window.URLCONFIG.Emr),"medicalNow"!==this.currentId&&(this.isShow=!1,this.activeNodeData.medicalHistoryNow={},this.isNewAdd=!0,this.isShowMsg=!0))},loadOver:function(e){var t=this;if(window.parent!==e.source){console.log(e.data,this.checkAll,"模板加载完成");var a=e.data;if("load"===a.type){if(this.isFirst)return this.isFirst=!1,console.log("isFirst"),void(this.timer=setTimeout(function(){t.tabChange("1")},300));if(this.isCope)return this.isCope=!1,void this.$msg[a.status?"success":"warning"](a.status?"该模版已复制到“当前病历”里,请切换到“当前病历”进行编辑。":"复制病历失败");this.getAdviceList(),this.$store.commit("public/SET_SHOWLOADING",!1)}else if("save"===a.type){if(this.isNewAdd)this.timer=setTimeout(function(){a.status&&t.tabChange("1")},300),this.isNewAdd=!1,this.$msg[a.status?"success":"warning"](a.status?"新增病历成功":"新增病历失败");else if(a.status&&(this.activeNodeData.medicalHistoryNow.UpdateTime=Object(b["a"])(),this.activeNodeData.medicalHistoryNow.UpdateUserName=this.userName),this.isShowMsg){var i=a.status?"病历保存成功":"病历保存失败";this.$msg[a.status?"success":"warning"](i),this.isShowMsg=!1}}else"saveSection"===a.type?(this.$msg[a.status?"success":"warning"](a.status?"段落模板保存成功":"段落模板保存失败"),a.status&&(this.isShow=!1,this.tabChange("2"),"paragraphData"===this.alterType&&this.$refs.aletrData.clearData())):"saveTemplate"===a.type?(a.status&&this.$msg[a.status?"success":"warning"](a.status?"病历模板保存成功":"病历模板保存失败"),(1===this.activeName&&this.medicalNow.indexOf("mark=true")>-1||2===this.activeName)&&this.medicalOperation("mark",1===this.activeName?"medicalNow":"medicalOld")):"insertData"===a.type?this.$msg[a.status?"success":"warning"](a.status?"引用数据成功":"引用数据失败"):"insertHtml"===a.type?(this.$msg[a.status?"success":"warning"](a.status?"插入成功":"插入失败"),this.isShow=!1):ne.includes(a.type)?(this.$msg[a.status?"success":"warning"](a.status?"插入成功":"插入失败"),this.isShow=!1):"ismark"===a.type?a.status?(this.medicalOperation("print",1===this.activeName?"medicalNow":"medicalOld"),this.medicalOperation("markOut")):this.timer=setTimeout(function(){t.medicalOperation("ismark")},300):"realtimesave"===a.type&&(console.log("realtimesaverealtimesaverealtimesaverealtimesaverealtimesaverealtimesave"),this.tabChange("1"))}},changeTime:function(e){var t=this;this.$Api.updateEmrTime({id:this.activeNodeData.medicalHistoryNow.Id,time:e}).then(function(a){t.$msg[a.Status?"success":"warning"](a.Message),a.Status&&(t.activeNodeData.medicalHistoryNow.UpdateTime=e,t.activeNodeData.medicalHistoryNow.CreateUserName=t.activeNodeData.medicalHistoryNow.UpdateUserName=t.userName)}),console.log(this.activeNodeData.medicalHistoryNow.CreateTime,e)},copeMedical:function(e){var t=(new Date).getTime();if(t-this.copeTime>3e3){this.copeTime=t;var a=1===this.activeNodeData.medicalHistoryNow.Status;if(a&&this.isSave&&this.medicalOperation("realtimesave"),console.log("dsaadsadsa"),1===this.activeNodeData.medicalHistoryNow.Status&&!this.isDisabled&&this.medicalOperation("save"),this.alterType="cope",this.copeId=e,this.isSignName){var i={Type:"0",Data:[{Name:"病历保存"}],No:this.user.UserInfo.No,UserName:this.user.UserInfo.Name};this.currentObjData=i,this.caSignOperation.KeyVerify()}else this.handleOperation()}},print:function(e,t){if("list"===e){var a=this.$refs.medicalHistoryNow.getNode(),i=a.getCheckedNodes(!0),s=this.sortArrList(i);if(console.log("批量打印",s),!s.length)return this.$msg.info("未选择打印的病历！");this.checkArr=s,this.alterType="bulkPrintData",this.isShow=!0}else if("old"===e){var o=this.$refs.medicalHistoryOld.getNode(),r=o.getCheckedNodes(!0),n=this.sortArrList(r);console.log("old",t);var c=[];if(t.MedicalRecordInfos.forEach(function(e){n.includes(e.Id)&&c.push(e.Id)}),console.log(c,"raar"),!c.length)return this.$msg.info("未选择打印的病历！");this.checkArr=c,this.alterType="bulkPrintData",this.isShow=!0}else{if(!e)return;1!==this.activeNodeData.medicalHistoryNow.Status||1!==this.activeName||this.isDisabled?(console.log("打印"),this.medicalOperation("print",e)):(this.medicalOperation("mark"),this.medicalOperation("ismark")),console.log(e,t,"单个打印")}},putEmrInvalid:function(){var e=this;1===this.activeNodeData.medicalHistoryNow.Status&&this.$confirm("该操作将作废该病历,是否继续","",{type:"warning"}).then(function(){e.$Api.putEmrInvalid({id:e.activeNodeData.medicalHistoryNow.Id}).then(function(t){e.$msg[t.Status?"success":"warning"](t.Message),t.Status&&(e.activeNodeData.medicalHistoryNow.Status=3,e.$refs.medicalHistoryNow.getNode().setChecked(e.activeNodeData.medicalHistoryNow,!1),e.medicalOperation("mark"))})}).catch(function(){e.$msg.info("已取消操作")})},putEmrRestore:function(){var e=this;this.$Api.putEmrRestore({id:this.activeNodeData.medicalHistoryNow.Id}).then(function(t){e.$msg[t.Status?"success":"warning"](t.Message),t.Status&&(e.activeNodeData.medicalHistoryNow.Status=1,e.medicalOperation("markOut"))})},putEmrArchiving:function(){var e=this,t=[];if(this.medicalNowList.forEach(function(e){e.MedicalRecordInfos.forEach(function(e){1===e.Status&&t.push(e.Id)})}),!t.length)return this.$msg.info("没有可归档的病历");this.$confirm("该操作将归档所有病历,是否继续？","",{type:"warning"}).then(function(){e.$Api.putEmrArchiving({Ids:t}).then(function(t){e.$msg[t.Status?"success":"warning"](t.Message),t.Status&&(e.tabChange("1"),1===e.activeNodeData.medicalHistoryNow.Status&&(e.activeNodeData.medicalHistoryNow.Status=2,e.activeNodeData.medicalHistoryNow.UpdateTime=Object(b["a"])(),e.activeNodeData.medicalHistoryNow.UpdateUserName=e.userName,e.medicalOperation("mark")))})}).catch(function(){e.$msg.info("已取消操作")})},nodeClick:function(e,t,a){var i=this,s=!1;"medicalHistoryNow"===t&&(this.isExamine=!1,s=1===this.activeNodeData.medicalHistoryNow.Status,s&&this.isSave&&this.medicalOperation("realtimesave"),console.log(e,"9999",s&&this.isSave),this.isShowMsg=!1),this.activeNodeData[t]=e,this.defaultExpanded[t]=[a],"paragraph"===t&&1===this.activeNodeData.medicalHistoryNow.Status&&e.SectionContent&&document.getElementById("medicalNow").contentWindow.postMessage({type:"insertData",msg:e.SectionContent.replace(/\r\n/g,"<p></p>")},window.URLCONFIG.Emr),s?setTimeout(function(){"paragraph"!==t&&i.loadIframe(t)},300):"paragraph"!==t&&this.loadIframe(t)},loadIframe:function(e,t){var a=this,i="medicalHistoryNow"===e?"medicalNow":"medicalOld",s="",o={patientId:this.patientMsg.PatientId,inHospPatId:this.patientMsg.InHouseId||this.$route.query.id,areaType:this.patientMsg.AreaType||1,createUser:this.user.UserInfo.Id,originUrl:window.location.protocol+"\\"+window.location.host,objectType:12,isSignName:!!this.isSignName,UserNo:this.user.UserInfo.No};for(var r in console.log("obj",o),t?("cope"===e?(o.documentId=t,o.isCopy=!0):o.templateId=t,o.isDirectSave=!0,o.t=+new Date,i=e):(o.logUserEditTrack=!1,o.documentId=this.activeNodeData[e].Id,o.oriTemplateId=this.activeNodeData[e].OriTemplateId,this.editRole.Person?this.isDisabled=!1:this.activeNodeData.medicalHistoryNow.CreateUserId===this.userId?this.isDisabled=!1:this.isDisabled=!0,o.mark="medicalHistoryNow"!==e||(1!==this.activeNodeData.medicalHistoryNow.Status||this.isDisabled),this.$store.commit("public/SET_SHOWLOADING",!0)),o)s+="".concat(r,"=").concat(o[r],"&");s=s.substring(0,s.length-1);var n="".concat(URLCONFIG.Emr,"/Nursing/EditPage.aspx?").concat(s);n!=this[i]?(console.log("url",n),this.isSetAdvice="medicalHistoryNow"===e&&!t&&!o.mark,"medicalHistoryNow"===e&&(this.isSave=!t&&!o.mark),t?this.$store.commit("public/SET_PRINTIFRAMEURL",n):Object(b["l"])(n).then(function(e){a[i]=e})):this.$store.commit("public/SET_SHOWLOADING",!1)},closeAlter:function(e){if(e){this.currentType="save",this.currentId="templateAlter";var t=this.isNewAdd;if("templateData"===this.alterType&&(this.isNewAdd=!0,t))return;if(console.log(this.alterType,"引用数据成功"),"templateData"===this.alterType&&this.isSignName){var a={Type:"0",Data:[{Name:"病历保存"}],No:this.user.UserInfo.No,UserName:this.user.UserInfo.Name};this.currentObjData=a,this.caSignOperation.KeyVerify()}else this.handleOperation()}else"paragraphData"===this.alterType&&this.$refs.aletrData.clearData(),this.$store.commit("public/SET_SHOWLOADING",!1),this.isShow=!1},showAlter:function(e,t){if(console.log(e,t),"templateData"===t){var a=1===this.activeNodeData.medicalHistoryNow.Status;a&&this.isSave&&this.medicalOperation("realtimesave")}this.isNewAdd=!1,this.alterType=t,this[t].activeName=e,this[t].HISPatientId=this.patientMsg.HISPatientId,this[t]=Object(n["a"])({},this[t]),this.isShow=!0},tabChange:function(e){var t=this;"1"===e?this.$Api.getEmrNow({inHospitalId:this.$route.query.id||this.patientMsg.InHouseId}).then(function(e){t.medicalNowList=e.Data||[];var a=t.medicalNowList.length;if(a?(t.isFiles=!0,t.medicalNowList.forEach(function(e){e.MedicalRecordInfos.forEach(function(e,a){2==e.Status&&(console.log("data.status",e),t.isFiles=!1)})})):(t.$store.commit("public/SET_SHOWLOADING",!1),t.isFiles=!0),t.caseData&&a)t.medicalNowList.forEach(function(e){e.MedicalRecordInfos.forEach(function(a,i){if(t.caseData.Id===a.Id){var s=e.MedicalRecordInfos;console.log("arr",s),t.defaultExpanded.medicalHistoryNow=[e.Id],t.$nextTick(function(){t.$refs.medicalHistoryNow.currentChange(s[i],t.defaultExpanded.medicalHistoryNow[0])})}})});else{if(console.log(t.patientMsg,"this.patientMsg"),!a&&8!=t.patientMsg.Status&&3!==t.patientMsg.AreaType&&t.patientMsg.AreaType){t.$store.commit("public/SET_SHOWLOADING",!0),t.isFirst=!0;var i="";return console.log("defaultTemplent",t.defaultTemplent),t.defaultTemplent.forEach(function(e){e.Id===t.patientMsg.AreaId&&(i=e.TemplateId)}),void(i&&t.loadIframe("iframe",i))}if(a&&t.medicalNowList[a-1].MedicalRecordInfos.length&&!t.activeNodeData.medicalHistoryNow.Id){var s=t.medicalNowList[a-1].MedicalRecordInfos;console.log(s),t.defaultExpanded.medicalHistoryNow=[t.medicalNowList[a-1].Id],t.$nextTick(function(){t.$refs.medicalHistoryNow.currentChange(s[s.length-1],t.defaultExpanded.medicalHistoryNow[0])})}t.medicalNowLength=t.medicalNowList.length,t.medicalNowList.forEach(function(e){t.medicalNowLength+=e.MedicalRecordInfos.length})}}):this.$Api.getParagraphList().then(function(e){var a=e.Data||[];if(t.paragraphList=a,t.paragraphList.length&&t.paragraphList[0].PersonalMedicalRecordSectionModels&&t.paragraphList[0].PersonalMedicalRecordSectionModels.length&&!t.defaultExpanded.paragraph.length){t.paragraphList[0].PersonalMedicalRecordSectionModels;t.defaultExpanded.paragraph=[t.paragraphList[0].Id]}})},checkChange:function(e,t,a){console.log(e,t,a);var i=this.$refs.medicalHistoryNow.getNode(),s=i.getCheckedKeys().length;console.log(s,this.medicalNowLength,"1111"),this.isIndeterminate=s>0&&s<this.medicalNowLength,this.checkAll=!!s&&s===this.medicalNowLength,console.log("this.checkAll",this.checkAll)},checkAllChange:function(e){console.log(e,"12344");var t=this.$refs.medicalHistoryNow.getNode();this.medicalNowList.forEach(function(a){a.MedicalRecordInfos.forEach(function(a){t.setChecked(a,e,!0)})})},getMedicalList:function(e){var t=this;1===e?(this.tabChange(this.activeTab),"2"===this.activeTab&&this.tabChange("1")):this.$Api.getEmrHistory({patientId:this.patientMsg.PatientId}).then(function(e){if(e.Status){t.medicalOldList=e.Data||[];var a=t.medicalOldList.length;if(t.caseData&&a&&t.medicalOldList.forEach(function(e){e.MedicalRecordInfos.forEach(function(a,i){if(t.caseData.Id===a.Id){var s=e.MedicalRecordInfos;return console.log("arr",s),t.activeNodeData.medicalHistoryOld=s[i],t.defaultExpanded.medicalHistoryOld=[e.Id],void t.$nextTick(function(){t.$refs.medicalHistoryOld.currentChange(s[i],t.defaultExpanded.medicalHistoryOld[i])})}})}),t.medicalOldList.length&&t.medicalOldList[0].MedicalRecordInfos.length&&!t.activeNodeData.medicalHistoryOld.Id){var i=t.medicalOldList[0].MedicalRecordInfos;t.activeNodeData.medicalHistoryOld=i[0],t.defaultExpanded.medicalHistoryOld=[t.medicalOldList[0].Id],t.$nextTick(function(){t.$refs.medicalHistoryOld.currentChange(i[0],t.defaultExpanded.medicalHistoryOld[0])})}}else t.$msg.warning(e.Message)})},sortArrList:function(e){var t=Object(o["a"])(e);t.sort(function(e,t){return new Date(e.CreateTime).getTime()-new Date(t.CreateTime).getTime()}),console.log(t);for(var a=[],i=0;i<t.length;i++)a.push(t[i].Id);return a},getAdviceList:function(){var e=this;console.log("自动引用"),this.isSetAdvice&&this.$Api.getAdviceList({inHouseId:this.$route.query.id||this.patientMsg.InHouseId,orderStatus:2}).then(function(t){var a=t.Data||[],i=e.getAdviceStr(a);console.log(i,"strObj");var s={"Standard_SJY.231.1000.6596_20200616205819853":"","Standard_SJY.7.1000.7477_20200618104320109":"","Business_SJY.223.4678175835784637066_20200617164346607":"","Standard_SJY.244.1000.38_20200703220656590":e.patientMsg.Diagnosis||""},o="";for(var r in i)i[r]&&("checkout"===r?s["Standard_SJY.231.1000.6596_20200616205819853"]="<br/>检查"+i[r]:"examine"===r?s["Standard_SJY.7.1000.7477_20200618104320109"]="<br/>检验"+i[r]:o+="".concat("drug"===r?"<br/>药品":"<br/>治疗").concat(i[r]));o&&(s["Business_SJY.223.4678175835784637066_20200617164346607"]=o),console.log(s),document.getElementById("medicalNow").contentWindow.postMessage({type:"selfMotionInsertData",data:s},window.URLCONFIG.Emr)})},getAdviceStr:function(e){var t=this,a="",i="",s="",o="";return e.forEach(function(e){if(7!==e.Status&&t.user.UserInfo.No===e.CreateUserId){var r=e.OrderType;switch(r){case 0:"<br/>".concat(e.OrderContent," ").concat(e.FrequencyText," ");break;case 7:a="",e.OrderDetails.forEach(function(e){a+="<br/>".concat(e.DictItemName)}),s+="".concat(a," ");break;case 8:a="",e.OrderDetails.forEach(function(e){a+="<br/>".concat(e.DictItemName)}),o+="".concat(a," ");break;case 14:a="",e.OrderDetails.forEach(function(e){var i=t.getgroupStr(e);a+="".concat(i).concat(e.Insurance).concat(e.SpecialName&&"普通"!==e.SpecialName?"["+e.SpecialName+"]":"").concat(e.MedicineName," ").concat(e.Dose).concat(e.Unit)}),i+="".concat(a," ").concat(e.UsageText,"  ").concat(e.FrequencyText).concat(e.OrderDays?" "+e.OrderDays+"天":"");break}}}),{drug:i,checkout:s,examine:o}},getgroupStr:function(e){var t="<br/>";return 1===e.GroupCount?t:(1===e.GroupNumber?t+="┏":e.GroupNumber===e.GroupCount?t+="┗":t+="│",t)}},destroyed:function(){this.$store.commit("case/SET_CASEDATA",null)},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}}},le=ce,de=(a("7813"),Object(p["a"])(le,i,s,!1,null,"79842a03",null));t["default"]=de.exports},fdda:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tree",e._g(e._b({ref:e.type,staticClass:"medical-now-tree",class:{paragraph:"paragraph"===e.type},attrs:{data:e.treeData,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":e.isHig,"default-checked-keys":e.checkList},on:{"current-change":e.currentChange,"check-change":e.checkChange,"node-expand":e.nodeExpand,"node-click":e.leafClick,check:e.checkNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return a("span",{},["medicalHistoryNow"===e.type?a("el-tooltip",{attrs:{effect:"light","open-delay":400,placement:"right","popper-class":"paragraph-warp"}},[a("div",{staticClass:"span-ellipsis",attrs:{slot:"content"},slot:"content"},[e._v(e._s(i.label))]),a("div",{staticClass:"warp"},[a("p",{staticClass:"textEllipsis",class:{disabled:i.disabled}},[e._v("\n        "+e._s(i.label)+"\n      ")]),i.disabled?a("span",{staticClass:"icon"},[e._v("废")]):e._e()])]):"paragraph"===e.type?a("el-tooltip",{attrs:{effect:"light","open-delay":400,disabled:!!s.PersonalMedicalRecordSectionModels,placement:"right","popper-class":"paragraph-warp"}},[a("div",{staticStyle:{width:"230px","line-height":"22px",overflow:"auto","max-height":"80vh"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(s.SectionContent))]),a("div",{class:s.PersonalMedicalRecordSectionModels?"":"paragraph-text"},[e._v(e._s(i.label))])]):"examine"===e.type||"checkout"===e.type||"package"===e.type?a("el-tooltip",{attrs:{effect:"light","open-delay":400,placement:"right","popper-class":"paragraph-warp"}},[a("div",{staticClass:"span-ellipsis",attrs:{slot:"content"},slot:"content"},[e._v(e._s(i.label))]),a("span",{class:[i.checked&&0==i.childNodes.length?"selectNode":""]},[e._v(e._s(i.label)+"\n    ")])]):"medicalHistoryOld"===e.type?a("p",[a("span",[e._v(e._s(i.label))]),s.MedicalRecordInfos?e._t("medicalHistoryOld",null,{scope:s}):e._e()],2):"templateAlter"===e.type?a("el-tooltip",{attrs:{effect:"light","open-delay":400,placement:"left",content:i.label}},[a("div",[e._v(e._s(i.label))])]):[e._v(e._s(i.label))]],2)}}])},"el-tree",e.$attrs,!1),e.$listeners))},s=[],o=a("53ca"),r=(a("7514"),a("c9b7")),n={name:"medicalNowTree",props:{treeData:{type:Array,required:!0},children:{type:String},callBack:{type:Function,default:function(){}},type:{type:String},nodeKey:{type:String,default:"Id"},isHig:{type:Boolean,default:!0},selectCallback:{type:Function,default:function(){}}},data:function(){return{checkList:[],ischeck:!0}},watch:{treeData:function(){var e=this;console.log("变化",this.activePrescription,this.treeData),this.$nextTick(function(){e.activePrescription&&e.getNode().setCurrentKey(e.activePrescription[e.nodeKey])})}},mounted:function(){console.log(this.treeData,"s树状列表展示")},computed:{defaultProps:function(){return"medicalHistoryOld"===this.type?{children:"MedicalRecordInfos",label:function(e,t){return e.MedicalRecordInfos?"".concat(Object(r["a"])("yyyy/MM/dd",new Date(e.InHospTime))," ").concat(e.DepartmentName?e.DepartmentName:""):Object(r["a"])("MM/dd HH:mm",new Date(e.CreateTime))+" "+e.TemplateName}}:"medicalHistoryNow"===this.type?{children:"MedicalRecordInfos",label:function(e,t){return e.MedicalRecordInfos?e.AreaName:Object(r["a"])("MM/dd HH:mm",new Date(e.CreateTime))+" "+e.TemplateName},disabled:function(e,t){return!e.MedicalRecordInfos&&3===e.Status}}:"paragraph"===this.type?{children:"PersonalMedicalRecordSectionModels",label:"Name"}:"prescription"===this.type?{children:"MenuContentList",label:function(e,t){return e.MenuContentList?e.Describe:Object(r["a"])("MM/dd HH:mm",new Date(e.PrescriptionCreateTime))+" "+e.PrescriptionTypeName+" "+e.PrescriptionStatusName}}:"templateAlter"===this.type?{children:"MedList",label:function(e){return e.MedList?e.CategoryName:e.TemplateName}}:"orderPackage"===this.type||"package"===this.type?(console.log("treeData",this.treeData),{children:"detailInfoList",label:"Name"}):"historyDoctorAdvice"===this.type?{children:"children",label:"label"}:"examine"===this.type||"checkout"===this.type?(console.log(1111),{children:"ChildCategory",label:"Name"}):"treatmentSingle"===this.type?{children:"Content",label:function(e,t){if(console.log(new Date(e.InHouseTime),e.InHouseTime,9999999999),e.Content){var a=e.OutHospTime?Object(r["a"])("yyyy/MM/dd",new Date(e.OutHospTime)):"至今";return Object(r["a"])("yyyy/MM/dd",new Date(e.InHouseTime))+" - "+a}return Object(r["a"])("MM/dd HH:mm",new Date(e.OrderTime))+" 治疗单 "+e.PrescriptionStatusName}}:{children:"List",label:"Name"}}},methods:{nodeExpand:function(e,t,a){console.log(e,t,a)},checkNode:function(e,t){if(console.log(e,"复选框选中节点",t),"package"!==this.type||!e.detailInfoList){var a=e.Id,i=t.checkedNodes.find(function(e){return e.Id==a});console.log(i),i?this.selectNode(!0,{data:e}):this.selectNode(!1,{data:e})}},leafClick:function(e,t){console.log(e,"选中叶子节点",t,this.children),"package"===this.type&&e.detailInfoList||this.selectNode(t.checked,t)},getNode:function(){return this.$refs[this.type]},checkChange:function(){this.checkList=this.getNode().getCheckedKeys(!0)},currentChange:function(e,t){if(console.log(e,t,"当前选中节点变化时触发的事件",this.type,this.activePrescription),e[this.children]&&0!=e[this.children].length)this.getNode().setCurrentNode(t),this.activePrescription&&this.getNode().setCurrentKey(this.activePrescription[this.nodeKey]);else{var a="object"===Object(o["a"])(t)?t.parent.key:t;(this.activePrescription&&this.activePrescription[this.nodeKey]!==e[this.nodeKey]||!this.activePrescription||"paragraph"===this.type)&&this.callBack(e,this.type,a),this.activePrescription=e}},selectNode:function(e,t){this.selectCallback(e,t.data)}}},c=n,l=(a("85ea"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,null,null);t["a"]=d.exports}}]);
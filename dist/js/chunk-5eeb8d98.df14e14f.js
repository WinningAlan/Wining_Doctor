(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5eeb8d98"],{"18e1":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"new-operation"},[o("el-form",{ref:"newOperation",class:{"demo-ruleForm":e.isBorder},attrs:{model:e.ruleForm,rules:e.isVerification?e.rules:e.rulesNull,"label-width":"95px"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"术前诊断",prop:"DiagnosisName"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"","default-first-option":""},model:{value:e.ruleForm.DiagnosisName,callback:function(t){e.$set(e.ruleForm,"DiagnosisName",t)},expression:"ruleForm.DiagnosisName"}},e._l(e.diagnoseList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.DiagnosisName,value:e.DiagnosisName}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"拟施手术",prop:"OperationName"}},[o("el-select",{attrs:{"automatic-dropdown":!0,placeholder:"请输入关键词",filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteplanList},on:{change:e.selectOperationName},model:{value:e.ruleForm.OperationName,callback:function(t){e.$set(e.ruleForm,"OperationName",t)},expression:"ruleForm.OperationName"}},e._l(e.planData,function(e,t){return o("el-option",{key:t,attrs:{label:e.Key,value:e.Key}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术等级",prop:"OperationLevel"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.OperationLevel,callback:function(t){e.$set(e.ruleForm,"OperationLevel",t)},expression:"ruleForm.OperationLevel"}},e._l(e.dictData.OperationLevel,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术类型",prop:"OperationType"}},[o("el-select",{attrs:{"automatic-dropdown":!0,placeholder:"请选择"},model:{value:e.ruleForm.OperationType,callback:function(t){e.$set(e.ruleForm,"OperationType",t)},expression:"ruleForm.OperationType"}},e._l(e.dictData.OperationType,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术室",prop:"OperationRoom"}},[o("el-select",{attrs:{"automatic-dropdown":!0,placeholder:"请选择"},model:{value:e.ruleForm.OperationRoom,callback:function(t){e.$set(e.ruleForm,"OperationRoom",t)},expression:"ruleForm.OperationRoom"}},e._l(e.dictData.OperationRoom,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术部位",prop:"OperationHumanBody"}},[o("el-select",{attrs:{"automatic-dropdown":!0,placeholder:"请选择"},model:{value:e.ruleForm.OperationHumanBody,callback:function(t){e.$set(e.ruleForm,"OperationHumanBody",t)},expression:"ruleForm.OperationHumanBody"}},e._l(e.dictData.OperationHumanBody,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术台次",prop:"OperationCountNo"}},[o("el-select",{attrs:{"automatic-dropdown":!0,placeholder:"请选择",filterable:"","allow-create":"","default-first-option":""},model:{value:e.ruleForm.OperationCountNo,callback:function(t){e.$set(e.ruleForm,"OperationCountNo",t)},expression:"ruleForm.OperationCountNo"}},e._l(10,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"拟手术时间",prop:"ExpectOperationTime"}},[o("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.ruleForm.ExpectOperationTime,callback:function(t){e.$set(e.ruleForm,"ExpectOperationTime",t)},expression:"ruleForm.ExpectOperationTime"}})],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"体位",prop:"OperationHumanPosition"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.OperationHumanPosition,callback:function(t){e.$set(e.ruleForm,"OperationHumanPosition",t)},expression:"ruleForm.OperationHumanPosition"}},e._l(e.dictData.OperationHumanPosition,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"切口等级",prop:"IncisionLevel"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.IncisionLevel,callback:function(t){e.$set(e.ruleForm,"IncisionLevel",t)},expression:"ruleForm.IncisionLevel"}},e._l(e.dictData.OperationIncisionLevel,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"备血",prop:"IsBloodPreparation"}},[o("el-radio-group",{model:{value:e.ruleForm.IsBloodPreparation,callback:function(t){e.$set(e.ruleForm,"IsBloodPreparation",t)},expression:"ruleForm.IsBloodPreparation"}},[o("el-radio",{attrs:{label:!0,border:""}},[e._v("有")]),o("el-radio",{attrs:{label:!1,border:""}},[e._v("无")])],1)],1)],1),o("div",{staticClass:"item bloodTypeName"},[o("el-form-item",{attrs:{label:"血型",prop:"BloodTypeCode"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},on:{change:e.selectBloodType},model:{value:e.ruleForm.BloodTypeCode,callback:function(t){e.$set(e.ruleForm,"BloodTypeCode",t)},expression:"ruleForm.BloodTypeCode"}},e._l(e.dictData.BloodTypeModel,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1),o("el-form-item",{staticClass:"rh",attrs:{label:"RH",prop:"RH"}},[o("el-radio-group",{ref:"a",model:{value:e.ruleForm.RH,callback:function(t){e.$set(e.ruleForm,"RH",t)},expression:"ruleForm.RH"}},[o("el-radio",{attrs:{label:"阴性",border:""}},[e._v("阴")]),o("el-radio",{attrs:{label:"阳性",border:""}},[e._v("阳")])],1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"主刀医生",prop:"MianDoctorId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"",loading:e.loading,"automatic-dropdown":!0,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.MianDoctorId,callback:function(t){e.$set(e.ruleForm,"MianDoctorId",t)},expression:"ruleForm.MianDoctorId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"指导医师",prop:"InstructDoctorId "}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.InstructDoctorId,callback:function(t){e.$set(e.ruleForm,"InstructDoctorId",t)},expression:"ruleForm.InstructDoctorId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术一助",prop:"FirstAssistantId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.FirstAssistantId,callback:function(t){e.$set(e.ruleForm,"FirstAssistantId",t)},expression:"ruleForm.FirstAssistantId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"手术二助",prop:"SecondAssistantId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.SecondAssistantId,callback:function(t){e.$set(e.ruleForm,"SecondAssistantId",t)},expression:"ruleForm.SecondAssistantId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"麻醉医师",prop:"AnesthesiaDoctorId "}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.AnesthesiaDoctorId,callback:function(t){e.$set(e.ruleForm,"AnesthesiaDoctorId",t)},expression:"ruleForm.AnesthesiaDoctorId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"麻醉助手",prop:"AnesthesiaAssistantId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectDoct},on:{focus:function(t){e.doctorList=e.defaultDoctorList}},model:{value:e.ruleForm.AnesthesiaAssistantId,callback:function(t){e.$set(e.ruleForm,"AnesthesiaAssistantId",t)},expression:"ruleForm.AnesthesiaAssistantId"}},e._l(e.doctorList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"麻醉方式",prop:"AnesthesiaType"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.AnesthesiaType,callback:function(t){e.$set(e.ruleForm,"AnesthesiaType",t)},expression:"ruleForm.AnesthesiaType"}},e._l(e.dictData.OperationAnesthesia,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"麻醉时间",prop:"AnesthesiaTime"}},[o("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","default-time":"12:00:00"},model:{value:e.ruleForm.AnesthesiaTime,callback:function(t){e.$set(e.ruleForm,"AnesthesiaTime",t)},expression:"ruleForm.AnesthesiaTime"}})],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"巡回护士",prop:"CircuitNurseId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectNurse},on:{focus:function(t){e.nurseList=e.defaultNurseList}},model:{value:e.ruleForm.CircuitNurseId,callback:function(t){e.$set(e.ruleForm,"CircuitNurseId",t)},expression:"ruleForm.CircuitNurseId"}},e._l(e.nurseList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"机械护士",prop:"InstrumentNurseId"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",remote:"","automatic-dropdown":!0,loading:e.loading,"default-first-option":"","remote-method":e.selectNurse},on:{focus:function(t){e.nurseList=e.defaultNurseList}},model:{value:e.ruleForm.InstrumentNurseId,callback:function(t){e.$set(e.ruleForm,"InstrumentNurseId",t)},expression:"ruleForm.InstrumentNurseId"}},e._l(e.nurseList,function(e){return o("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"异物置入物",prop:"ForeignBodyImplants"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.ForeignBodyImplants,callback:function(t){e.$set(e.ruleForm,"ForeignBodyImplants",t)},expression:"ruleForm.ForeignBodyImplants"}},e._l(e.foreignMatter,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"多重耐药菌",prop:"MDRO"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.MDRO,callback:function(t){e.$set(e.ruleForm,"MDRO",t)},expression:"ruleForm.MDRO"}},e._l(e.mdrOptions,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"乙肝",prop:"HBV"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.HBV,callback:function(t){e.$set(e.ruleForm,"HBV",t)},expression:"ruleForm.HBV"}},e._l(e.options,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"丙肝",prop:"HCV"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.HCV,callback:function(t){e.$set(e.ruleForm,"HCV",t)},expression:"ruleForm.HCV"}},e._l(e.options,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"梅毒",prop:"RPR"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.RPR,callback:function(t){e.$set(e.ruleForm,"RPR",t)},expression:"ruleForm.RPR"}},e._l(e.options,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"艾滋",prop:"HIV"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":!0},model:{value:e.ruleForm.HIV,callback:function(t){e.$set(e.ruleForm,"HIV",t)},expression:"ruleForm.HIV"}},e._l(e.options,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Key,value:e.Value}})}),1)],1)],1),o("div",{staticClass:"item"},[o("el-form-item",{attrs:{label:"申请时间",prop:"ApplyTime"}},[o("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.changeTime},model:{value:e.ruleForm.ApplyTime,callback:function(t){e.$set(e.ruleForm,"ApplyTime",t)},expression:"ruleForm.ApplyTime"}})],1)],1)]),o("div",{staticClass:"remark"},[o("el-form-item",{attrs:{label:"说明",prop:"Description"}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:e.explain,callback:function(t){e.explain=t},expression:"explain"}})],1)],1),o("div",{staticClass:"remark"},[o("el-form-item",{attrs:{label:"备注",prop:"Remark"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"","automatic-dropdown":!0,"allow-create":"","default-first-option":""},model:{value:e.ruleForm.Remark,callback:function(t){e.$set(e.ruleForm,"Remark",t)},expression:"ruleForm.Remark"}},e._l(e.remarkOptions,function(t){return o("el-option",{key:t.Value,attrs:{label:t.Text,value:t.Text}},[e._v(e._s(t.Text))])}),1)],1)],1),e._t("default",null,{submitForm:e.submitForm})],2)],1)},r=[],i=(o("a481"),o("2909")),l=(o("6762"),o("28a5"),o("ac6a"),o("be94")),s=o("2f62"),n=o("c9b7"),u=o("d634"),c={data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<+new Date(Object(n["a"])("yyyy/MM/dd",new Date)+" 00:00:00")}},planData:[],diagnosticsOption:[{Text:"感冒",Value:"1"},{Text:"发烧",Value:"2"}],options:[{key:"未知",Value:"未知"},{key:"阴性",Value:"阴性"},{key:"阳性",Value:"阳性"}],foreignMatter:[{Key:"有",Value:"有"},{Key:"无",Value:"无"}],mdrOptions:[{Key:"未报告",Value:"未报告"},{Key:"是",Value:"是"},{Key:"否",Value:"否"}],rules:{DiagnosisName:[{required:!0,message:"手前诊断不能为空",trigger:"change"}],OperationName:[{required:!0,message:"请选择手术名称",trigger:"change"}],OperationType:[{required:!0,message:"请选择手术类型",trigger:"change"}],OperationRoom:[{required:!0,message:"请选择手术室",trigger:"change"}],OperationHumanBody:[{required:!0,message:"请选择手术部位",trigger:"change"}],OperationCountNo:[{required:!0,message:"请选择手术台次",trigger:"change"}],ExpectOperationTime:[{required:!0,message:"请选择手术时间",trigger:"change"}],OperationHumanPosition:[{required:!0,message:"请选择手术体位",trigger:"change"}],BloodTypeCode:[{required:!0,message:"请选择血型",trigger:"change"}],RH:[{required:!0,message:"请选择RH",trigger:"change"}],MianDoctorId:[{required:!0,message:"请选择主刀医生",trigger:"change"}],AnesthesiaType:[{required:!0,message:"请选择麻醉方式",trigger:"change"}],HBV:[{required:!0,message:"请选择乙肝",trigger:"change"}],HCV:[{required:!0,message:"请选择丙肝",trigger:"change"}],RPR:[{required:!0,message:"请选择梅毒",trigger:"change"}],HIV:[{required:!0,message:"请选择艾滋",trigger:"change"}],ApplyTime:[{required:!0,message:"请选申请时间",trigger:"change"}]},rulesNull:{},dictData:{BloodTypeModel:[],OperationAnesthesia:[],OperationHumanBody:[],OperationHumanPosition:[],OperationIncisionLevel:[],OperationLevel:[],OperationRoom:[],OperationType:[]},defaultDoctorList:[],doctorList:[],defaultNurseList:[],nurseList:[],loading:!1,ruleForm:{Id:"00000000-0000-0000-0000-000000000000",InHospitalId:"",DiagnosisAreaType:"",DiagnosisName:"",DiagnosisCode:"",OperationName:"",OperationCode:"",OperationLevel:"",OperationType:"",OperationRoom:"",OperationHumanBody:"",ExpectOperationTime:Object(n["a"])(),OperationCountNo:"",OperationHumanPosition:"",IncisionLevel:"",IsBloodPreparation:!0,BloodTypeName:"",BloodTypeCode:"",RH:"阴性",MianDoctorId:"",FirstAssistantId:null,SecondAssistantId:null,AnesthesiaDoctorId:null,AnesthesiaAssistantId:null,AnesthesiaType:"",AnesthesiaTime:null,CircuitNurseId:null,InstrumentNurseId:null,ForeignBodyImplants:"",InstructDoctorId:null,MDRO:"",HBV:"阴性",HCV:"阴性",HIV:"阴性",RPR:"阴性",Remark:"",Description:"",ApplyTime:"",IsAdditional:!1},diagnoseList:[]}},props:{commonObj:{type:Object,required:!0},isChange:{type:Boolean,default:!1},isVerification:{type:Boolean,default:!0},isBorder:{type:Boolean,default:!0}},computed:Object(l["a"])({},Object(s["b"])({patientMsg:"public/GET_PATIENTMSG",selectArea:"home/GET_SELECTAREA"}),{remarkOptions:function(e){return this.$store.getters["public/getDic"]("OperationRemark").filter(function(e){return-1!==e.Value})},explain:{get:function(){var e=this,t="###";this.dictData.OperationAnesthesia.forEach(function(o){o.Value===e.ruleForm.AnesthesiaType&&(t=o.Key)});var o=Object(n["a"])("yyyy-MM-dd HH:mm",new Date(this.ruleForm.ExpectOperationTime));return this.ruleForm.Description="拟于".concat(o,"在").concat(t,"方式下行").concat(this.ruleForm.OperationName?this.ruleForm.OperationName:"###","手术"),this.ruleForm.Description},set:function(e){this.ruleForm.Description=e}}}),watch:{commonObj:{handler:function(e,t){for(var o in e)this.ruleForm[o]=e[o];this.isFirst1=!0,this.isFirst2=!0,this.getNurseList("",1),this.getDoctorUser("",1)},immediate:!0,deep:!0},patientMsg:{handler:function(e){this.isVerification&&e.Diagnosis&&!this.isChange&&(this.ruleForm.DiagnosisName=e.Diagnosis?e.Diagnosis.split(";")[0]:"",this.ruleForm.DiagnosisCode=e.DiagnosisCode?e.DiagnosisCode.split(";")[0]:"")},immediate:!0,deep:!0}},created:function(){var e=this;this.getOldSubmit(),this.ruleForm.DiagnosisAreaType=this.selectArea.DiagnosisAreaType,this.nowTime=this.ruleForm.ApplyTime=this.ruleForm.ApplyTime?this.ruleForm.ApplyTime:Object(n["a"])(),this.pickerOptions.disabledDate=function(t){return t.getTime()<+new Date(Object(n["a"])("yyyy/MM/dd",new Date(e.patientMsg.InHospTime))+" 00:00:00")},this.$Api.getOperationD({}).then(function(t){console.log(t),t.Status&&(e.planData=t.Data)}),this.$Api.getOperationOtherD({}).then(function(t){t.Status&&(e.dictData=t.Data,console.log(t.Data))})},methods:{getKeyName:function(e){var t=this;this["isFirst"+e]=!1;var o=1===e?u["i"]:u["r"],a=[];console.log(this[1===e?"defaultDoctorList":"defaultNurseList"],"keyArr"),o.forEach(function(e){t.ruleForm[e]&&!a.includes(t.ruleForm[e])&&a.push(t.ruleForm[e])}),this[1===e?"doctorList":"nurseList"]=Object(i["a"])(this[1===e?"defaultDoctorList":"defaultNurseList"]),a.forEach(function(o){var a=!0;t[1===e?"defaultDoctorList":"defaultNurseList"].forEach(function(e){o===e.Id&&(a=!1)}),a&&t[1===e?"getDoctorUser":"getNurseList"](o,2)}),console.log(a,"arr")},getDoctorUser:function(e,t){var o=this;e=e?{content:e}:{},this.loading=!0,this.$Api.getDoctorUser(e).then(function(e){if(o.loading=!1,e.Status)if(1===t)o.defaultDoctorList=e.Data||[],o.isFirst1&&o.getKeyName(1);else if(2===t){var a;(a=o.defaultDoctorList).push.apply(a,Object(i["a"])(e.Data)),o.doctorList=o.defaultDoctorList}else o.doctorList=e.Data||[]})},getNurseList:function(e,t){var o=this;e=e?{content:e}:{},this.loading=!0,this.$Api.getNurseList(e).then(function(e){if(o.loading=!1,console.log(e),e.Status)if(1===t)o.isFirst2&&o.getKeyName(2),o.defaultNurseList=e.Data||[];else if(2===t){var a;(a=o.defaultNurseList).push.apply(a,Object(i["a"])(e.Data)),o.nurseList=o.defaultDoctorList}else o.nurseList=e.Data||[]})},selectOperationName:function(e){console.log(e);for(var t=0;t<this.planData.length;t++)this.planData[t].Key===e&&(this.ruleForm.OperationCode=this.planData[t].Value)},remoteplanList:function(e){var t=this;this.$Api.getOperationD({content:e}).then(function(e){console.log(e),e.Status&&(t.planData=e.Data)})},selectDoct:function(e){e=e&&e.replace(/\s+/g,""),e?this.getDoctorUser(e):this.doctorList=this.defaultNurseList},selectNurse:function(e){e=e&&e.replace(/\s+/g,""),e?this.getNurseList(e):this.nurseList=this.defaultNurseList},selectBloodType:function(e){console.log(e);for(var t=0;t<this.dictData.BloodTypeModel.length;t++)this.dictData.BloodTypeModel[t].Value===e&&(this.ruleForm.BloodTypeName=this.dictData.BloodTypeModel[t].Key);console.log(this.ruleForm)},submitForm:function(){var e=this;return new Promise(function(t,o){e.$refs.newOperation.validate(function(o,a){if(console.log(o),o){e.diagnoseList.forEach(function(t){t.DiagnosisName===e.ruleForm.DiagnosisName&&(e.ruleForm.DiagnosisCode=t.DiagnosisCode)});var r=Object(l["a"])({},e.ruleForm);r.InHospitalId=e.$route.query.id||"00000000-0000-0000-0000-000000000000",r.OperationCountNo=r.OperationCountNo||0,t(r)}else t(!1),console.log("error submit!!")})})},changeTime:function(e){+new Date(e)<+new Date(this.patientMsg.InHospTime)&&(this.$msg.info("开始时间不允许早于患者入科时间！"),this.ruleForm.ApplyTime=Object(n["a"])("yyyy/MM/dd HH:mm",new Date(this.patientMsg.InHospTime))),this.ruleForm.IsAdditional=parseInt(+new Date(e)/6e4)<parseInt(+new Date(this.nowTime)/6e4)},getOldSubmit:function(){var e=this;this.$route.query.id&&this.$Api.getHistoryDiagnoseList({inHouseId:this.$route.query.id}).then(function(t){e.diagnoseList=t.Data||[],console.log(e.diagnoseList,"this.diagnoseList")})}}},m=c,d=(o("4309"),o("2877")),p=Object(d["a"])(m,a,r,!1,null,"40cf1da9",null);t["a"]=p.exports},4309:function(e,t,o){"use strict";var a=o("9aec"),r=o.n(a);r.a},"9aec":function(e,t,o){}}]);
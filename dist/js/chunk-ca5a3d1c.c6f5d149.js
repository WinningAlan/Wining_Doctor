(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca5a3d1c"],{"0f2c":function(e,t,a){"use strict";var s=a("918b"),i=a.n(s);i.a},"33d9":function(e,t,a){},"3aff":function(e,t,a){},"3ceb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inspectDoctorAdvice doctor-advice"},[a("doctorAdviceTable",{attrs:{columns:e.columns,tableData:e.tableData,orderType:7,callback:e.callback},scopedSlots:e._u([{key:"adviceName",fn:function(t){var a=t.scope;return[a.row._edit?e._t("change",null,{index:a.row._index,itemName:a.row.DictItemName,departmentCode:e.departmentCode,categoryNo:e.categoryNo}):[e._v(e._s(a.row.DictItemName))]]}},{key:"InsuranceUseFlag",fn:function(t){var s=t.scope;return[a("el-checkbox",{model:{value:s.row.InsuranceUseFlag,callback:function(t){e.$set(s.row,"InsuranceUseFlag",t)},expression:"scope.row.InsuranceUseFlag"}})]}}])}),e._t("search",null,{departmentCode:e.departmentCode,categoryNo:e.categoryNo}),a("h2",[e._v("共性编辑")]),a("el-form",{ref:"inspectDoctorAdvice",staticClass:"doctor-advice-form",attrs:{model:e.commonData,rules:e.isVerification?e.rules:e.rulesNull,"label-position":"right","label-width":"80px"}},[a("el-form-item",{staticClass:"all attention",attrs:{label:"临床摘要",prop:"Attention"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:"",resize:"none",maxlength:"500"},model:{value:e.commonData.Attention,callback:function(t){e.$set(e.commonData,"Attention",t)},expression:"commonData.Attention"}}),a("div",{staticClass:"textarea-num"},[a("span",{class:{red:e.wordLength>500}},[e._v(e._s(e.wordLength))]),a("span",[e._v("/500")])])],1),a("el-form-item",{staticClass:"all",attrs:{label:"诊断",prop:"Diagnosis"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.commonData.Diagnosis,callback:function(t){e.$set(e.commonData,"Diagnosis",t)},expression:"commonData.Diagnosis"}},e._l(e.diagnoseList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.DiagnosisName,value:e.DiagnosisName}})}),1)],1),a("el-form-item",{attrs:{label:"检查目的",prop:"Target"}},[a("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.Target,callback:function(t){e.$set(e.commonData,"Target",t)},expression:"commonData.Target"}},e._l(e.purposeOptions,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Text,value:e.Text}})}),1)],1),a("el-form-item",{attrs:{label:"媒介项目",prop:"Medium"}},[a("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.Medium,callback:function(t){e.$set(e.commonData,"Medium",t)},expression:"commonData.Medium"}},e._l(e.mediaProjectsOptions,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Text,value:e.Text}})}),1)],1),a("el-form-item",{attrs:{label:"造影剂",prop:"ContrastAgent"}},[a("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.ContrastAgent,callback:function(t){e.$set(e.commonData,"ContrastAgent",t)},expression:"commonData.ContrastAgent"}},e._l(e.contrastMediumOptions,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Text,value:e.Text}})}),1)],1),a("el-form-item",{attrs:{label:"检查科室",prop:"ExcuteDepartment"}},[a("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},on:{change:e.selectRequestId},model:{value:e.commonData.ExcuteDepartment,callback:function(t){e.$set(e.commonData,"ExcuteDepartment",t)},expression:"commonData.ExcuteDepartment"}},e._l(e.deparmentOps,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),a("el-form-item",{attrs:{label:"申请时间",prop:"ApplyTime"}},[a("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.changeTime},model:{value:e.commonData.ApplyTime,callback:function(t){e.$set(e.commonData,"ApplyTime",t)},expression:"commonData.ApplyTime"}})],1),1==e.isMalignantFlag?a("el-form-item",{attrs:{label:"恶性肿瘤",prop:"MalignantFlag"}},[a("el-radio-group",{model:{value:e.commonData.MalignantFlag,callback:function(t){e.$set(e.commonData,"MalignantFlag",t)},expression:"commonData.MalignantFlag "}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1):e._e(),a("el-form-item",{attrs:{label:"其他"}},[a("el-checkbox",{model:{value:e.commonData.IsEmergency,callback:function(t){e.$set(e.commonData,"IsEmergency",t)},expression:"commonData.IsEmergency "}},[e._v("加急")]),a("el-checkbox",{model:{value:e.commonData.IsBed,callback:function(t){e.$set(e.commonData,"IsBed",t)},expression:"commonData.IsBed "}},[e._v("床旁")])],1),a("el-form-item",{staticClass:"all",attrs:{label:"备注",prop:"Remark"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"","allow-create":"","default-first-option":""},model:{value:e.commonData.Remark,callback:function(t){e.$set(e.commonData,"Remark",t)},expression:"commonData.Remark"}},e._l(e.remarkOptions,function(e){return a("el-option",{key:e.Value,attrs:{label:e.Text,value:e.Text}})}),1)],1)],1),e._t("default",null,{submitForm:e.submitForm})],2)},i=[],n=(a("7f7f"),a("28a5"),a("6762"),a("2fdb"),a("ac6a"),a("be94")),o=a("2e7f"),r=a("14c8"),c=a("c9b7"),l=a("2f62"),d=a("0713"),u={name:"inspectDoctorAdvice",components:{doctorAdviceTable:r["a"],searchDiagnose:d["a"]},props:{tableData:{type:Array,required:!0},commonObj:{type:Object,required:!0},isChange:{type:Boolean,default:!1},isVerification:{type:Boolean,default:!0},callback:{type:Function,default:function(){}},generalEditor:{type:Array,default:function(){return[]}}},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<+new Date(Object(c["a"])("yyyy/MM/dd",new Date)+" 00:00:00")}},columns:o["h"],rules:{Attention:[{required:!0,message:"请输入临床摘要",trigger:"change"}],Diagnosis:[{required:!0,message:"请选择诊断",trigger:"change"}],Target:[{required:!0,message:"请选择检查目的",trigger:"change"}],ExcuteDepartment:[{required:!0,message:"请选择检查科室",trigger:"change"}]},rulesNull:{},commonData:{DiagnosisAreaType:"",OrderType:7,IsAdditional:!1,EffectiveTime:1,Attention:"",Diagnosis:[],DiagnosisCode:[],Target:"明确诊断",Medium:"",ContrastAgent:"",ExcuteDepartment:"",IsEmergency:!1,IsBed:!1,Remark:"",ApplyTime:"",depStr:"",MalignantFlag:0},diagnoseList:[],departmentParentList:[]}},created:function(){var e=this;this.commonData.Diagnosis=[],this.getOldSubmit(),this.commonData.DiagnosisAreaType=this.selectArea.DiagnosisAreaType,this.nowTime=this.commonData.ApplyTime=this.commonData.ApplyTime?this.commonData.ApplyTime:Object(c["a"])(),this.isVerification&&this.getAttention(),this.pickerOptions.disabledDate=function(t){return t.getTime()<+new Date(Object(c["a"])("yyyy/MM/dd",new Date(e.patientMsg.InHospTime))+" 00:00:00")}},computed:Object(n["a"])({},Object(l["b"])({departmentOptions:"public/GET_ALLDEP",patientMsg:"public/GET_PATIENTMSG",selectArea:"home/GET_SELECTAREA",isMalignantFlag:"configuration/GET_ISMALIGNANTFLAG"}),{mediaProjectsOptions:function(e){return this.$store.getters["public/getDic"]("Vector").filter(function(e){return-1!==e.Value})},contrastMediumOptions:function(e){return this.$store.getters["public/getDic"]("ContrastAgent").filter(function(e){return-1!==e.Value})},wordLength:function(){return this.commonData.Attention.length},purposeOptions:function(e){return this.$store.getters["public/getDic"]("PurposeOfTest").filter(function(e){return-1!==e.Value})},remarkOptions:function(e){return this.$store.getters["public/getDic"]("CheckRemark").filter(function(e){return-1!==e.Value})},departmentCode:function(){var e=this.tableData.filter(function(e){return!e.IsDeleted});return e.length?this.commonData.ExcuteDepartment:""},categoryNo:function(){return this.tableData[0]?this.tableData[0].ParentCategoryCode:""},deparmentOps:function(){var e=this,t=Object(c["r"])(this.tableData,"NewDepartmentList");this.$route.query.id&&this.patientMsg.RegistId&&this.patientMsg.RegisterInfoList.forEach(function(a){e.patientMsg.RegistId===a.HisRegistId&&!t.includes(a.RegDepartmentCode)&&t.push(a.RegDepartmentCode)}),t.length&&(this.commonData.ExcuteDepartment=this.commonData.ExcuteDepartment?this.commonData.ExcuteDepartment:t[0]);var a=[];return this.$emit("changrequestId",this.commonData.ExcuteDepartment),t.forEach(function(t){e.departmentOptions.forEach(function(e){e.Code==t&&a.push(e)})}),a}}),watch:{commonObj:{handler:function(e,t){for(var a in e)this.commonData[a]=e[a]},immediate:!0,deep:!0},patientMsg:{handler:function(e){this.isVerification&&!this.isChange&&e.Diagnosis&&(this.commonData.Diagnosis=e.Diagnosis.slice(0,e.Diagnosis.length-1).split(";"),this.commonData.DiagnosisCode=e.DiagnosisCode.slice(0,e.DiagnosisCode.length-1).split(";"),this.getOldSubmit())},immediate:!0,deep:!0}},methods:{getAttention:function(){var e=this;this.$Api.getAttention({itemName:"临床摘要",inHospPatId:this.$route.query.id}).then(function(t){var a=t.Data||[],s="",i="",n="";a.forEach(function(e){if("主诉:"===e.title||"主诉："===e.title)s+="".concat(e.name,"、");else if("现病史:"===e.title||"现病史："===e.title)i+="".concat(e.name,"、");else if("体格检查:"===e.title||"体格检查："===e.title){var t=e.sjyname.split("（");t[0]+="：".concat(e.name),n+=t.join("（")+"、"}}),s=s.substring(0,s.length-1),i=i.substring(0,i.length-1),n=n.substring(0,n.length-1);var o="".concat(s).concat(s&&"\n").concat(i).concat(i&&"\n").concat(n).concat(n&&"\n");o=o.substring(0,o.length-1),e.commonData.Attention=e.commonData.Attention||o})},changeTime:function(e){+new Date(e)<+new Date(this.patientMsg.InHospTime)&&(this.$msg.info("医嘱开始时间不允许早于患者入科时间！"),this.commonData.ApplyTime=Object(c["a"])("yyyy/MM/dd HH:mm",new Date(this.patientMsg.InHospTime))),this.commonData.IsAdditional=parseInt(+new Date(e)/6e4)<parseInt(+new Date(this.nowTime)/6e4)},submitForm:function(){var e=this;return new Promise(function(t,a){e.$refs.inspectDoctorAdvice.validate(function(a,s){if(console.log(s),a){if(!e.tableData.filter(function(e){return!e.IsDeleted}).length)return e.$msg.info("当前没有医嘱项目，请添加后再保存！"),t(!1);if(e.wordLength>500)return setTimeout(function(){e.$msg.info("临床摘要内容超出长度限制，请修改！")},0),t(!1);var i=Object(n["a"])({},e.commonData),o=[];i.Diagnosis.forEach(function(t){e.diagnoseList.forEach(function(e,a){t===e.DiagnosisName&&(o[a]=e)})}),i.Diagnosis="",i.DiagnosisCode="",o.forEach(function(e){e&&(i.Diagnosis+=e.DiagnosisName+";",i.DiagnosisCode+=e.DiagnosisCode+";")}),i.InHouseId=e.$route.query.id,t({Details:i,Items:e.tableData})}else t(!1),console.log("error submit!!")})})},selectRequestId:function(e){this.requestId=e,this.$emit("changrequestId",e)},getOldSubmit:function(){var e=this;this.$route.query.id&&this.$Api.getHistoryDiagnoseList({inHouseId:this.$route.query.id}).then(function(t){e.diagnoseList=t.Data||[],e.isVerification&&(!e.commonData.Diagnosis||e.commonData.Diagnosis&&0===e.commonData.Diagnosis.length)&&e.diagnoseList.length&&(e.commonData.Diagnosis=e.diagnoseList.map(function(e){return e.DiagnosisName}),e.commonData.DiagnosisCode=e.diagnoseList.map(function(e){return e.DiagnosisCode}))})}}},m=u,h=(a("8db6"),a("2877")),p=Object(h["a"])(m,s,i,!1,null,null,null);t["a"]=p.exports},"708c":function(e,t,a){},"7d5b":function(e,t,a){"use strict";var s=a("33d9"),i=a.n(s);i.a},"8db6":function(e,t,a){"use strict";var s=a("3aff"),i=a.n(s);i.a},"918b":function(e,t,a){},"93bb":function(e,t,a){"use strict";var s=a("708c"),i=a.n(s);i.a},bc9b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"examine",staticClass:"examine"},[a("div",{staticClass:"tabs-temp"},[a("el-radio-group",{attrs:{fill:"#0071e7"},on:{change:e.tapsExamine},model:{value:e.nowTemp,callback:function(t){e.nowTemp=t},expression:"nowTemp"}},e._l(e.tabsTemp,function(t,s){return t.Show?a("el-radio-button",{key:s,attrs:{label:t.Value}},[e._v(e._s(t.Text))]):e._e()}),1)],1),a("div",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"newCreateExamine"===e.nowTemp,expression:"nowTemp === 'newCreateExamine'"}],staticClass:"newCreateExamine"},[a("div",{ref:"treeLeft",staticClass:"left",style:{width:e.leftWidth+"px"}},[a("div",{staticStyle:{"min-width":"200px",height:"100%"}},[a("myTabs",{attrs:{activeName:e.selectData,tabsList:e.tabsList,width:66.6,tabChange:e.tabChange},on:{"update:activeName":function(t){e.selectData=t}}}),a("div",{staticClass:"package-search"},[a("el-input",{attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{input:e.searchList},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMenu(t):null}},model:{value:e.treeName,callback:function(t){e.treeName="string"===typeof t?t.trim():t},expression:"treeName"}})],1),a("treeTable",{directives:[{name:"show",rawName:"v-show",value:1==e.selectData,expression:"selectData == 1"}],ref:"treeList",attrs:{data:e.treeData,defaultChildren:"ChildCategory",selectCallback:e.selectPackage,defaultExpandAll:e.isExpand}}),a("medicalNowTree",{directives:[{name:"show",rawName:"v-show",value:2==e.selectData,expression:"selectData == 2"}],key:"2",ref:"orderPackage",attrs:{"default-expanded-keys":e.defaultExpanded[e.selectData],callBack:e.selectOrderPackage,selectCallback:e.selectPackage,treeData:e.depTreeData,children:"List",type:"package",isHig:!1,"check-on-click-node":"","check-strictly":"","show-checkbox":""}}),a("medicalNowTree",{directives:[{name:"show",rawName:"v-show",value:3==e.selectData,expression:"selectData == 3"}],key:"3",ref:"orderPackage",attrs:{"default-expanded-keys":e.defaultExpanded[e.selectData],callBack:e.selectOrderPackage,selectCallback:e.selectPackage,treeData:e.personTreeData,children:"List",type:"package",isHig:!1,"check-on-click-node":"","show-checkbox":"","check-strictly":""}})],1)]),a("div",{ref:"resizeLine",staticClass:"resizeLine"}),a("div",{ref:"treeRight",staticClass:"right"},[a("start-request",{attrs:{title:"常用检查项目",usedCheckData:e.usedCheckData,callback:e.usedSelect}}),a("div",{staticClass:"right-tabs"},[a("el-radio-group",{attrs:{fill:"#0071e7"},on:{change:e.tablsChange},model:{value:e.tablsId,callback:function(t){e.tablsId=t},expression:"tablsId"}},e._l(e.tabls,function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.Id}},[e._v("\n              "+e._s(t.Name)+"\n              "),0!=s&&e.tablsId==t.Id?a("span",{staticClass:"el-icon-close close",on:{click:function(a){a.stopPropagation(),e.delItem(t,s)}}}):e._e()])}),1)],1),e._l(e.tabls,function(t,s){return a("inspectDoctorAdvice",{directives:[{name:"show",rawName:"v-show",value:e.tablsId==t.Id,expression:"tablsId == item.Id"}],key:s,ref:"inspect",refInFor:!0,staticClass:"inspect",attrs:{tableData:t.Items,commonObj:t.Details,callback:e.delRow},on:{changrequestId:function(a){e.changrequestId(a,t)}},scopedSlots:e._u([{key:"change",fn:function(t){var s=t.index,i=t.itemName,n=t.departmentCode,o=t.categoryNo;return a("searchDoctorAdvice",{attrs:{categoryNo:o,adviceName:7,index:s,departmentCode:n,itemName:i,callBack:e.add}})}},{key:"search",fn:function(t){var s=t.departmentCode,i=t.categoryNo;return a("searchDoctorAdvice",{attrs:{categoryNo:i,departmentCode:s,adviceName:7,callBack:e.add}})}},{key:"default",fn:function(t){var s=t.submitForm;return a("p",{staticClass:"advice-button"},[a("el-button",{staticClass:"reset",attrs:{plain:""},on:{click:function(t){e.cancel("add")}}},[e._v("取消")]),a("el-button",{staticClass:"save",on:{click:function(t){e.save(s)}}},[e._v("保存")])],1)}}])})})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"historyExamine"===e.nowTemp,expression:"nowTemp === 'historyExamine'"}],staticClass:"historyExamine"},[a("div",{staticClass:"left"},[a("history-list",{ref:"historyList",attrs:{historyListData:e.historyListData,callback:e.historyCall}})],1),a("div",{staticClass:"right"},[a("examin-table",{attrs:{tableData:e.tableData,callback:e.selectRow},scopedSlots:e._u([{key:"dd",fn:function(t){var s=t.scope;return[a("div",{staticClass:"dd-box"},[a("el-tooltip",{attrs:{effect:"dark",content:"引用",placement:"top-start"}},[8!=e.patientMsg.Status?a("svg-icon",{staticClass:"styleIcon",attrs:{iconClass:"quote"},on:{click:function(t){t.stopPropagation(),e.showTable(s.row)}}}):e._e()],1),1!==s.row.Status&&7!==s.row.Status?a("el-tooltip",{attrs:{effect:"dark",content:"打印",placement:"top-start"}},[a("svg-icon",{staticClass:"styleIcon",attrs:{iconClass:"printlist"},on:{click:function(t){t.stopPropagation(),e.print(s.row)}}})],1):e._e()],1)]}}])})],1)]),a("my-alert",{attrs:{visible:e.isShow,title:"检查申请单详请",callback:e.alterCallback,isfooter:!1,width:"1200px"}},[a("div",{staticClass:"alter-content"},[a("examinDetail",{tag:"component",attrs:{deatilData:e.saveSuccessData}})],1),e.isFooter&&8!=e.patientMsg.Status?a("div",{staticClass:"btnList"},[a("el-button",{staticClass:"save",on:{click:e.submitData}},[e._v("提交")]),a("el-button",{staticClass:"reset-list",on:{click:e.upData}},[e._v("修改")])],1):e._e()])],1)])},i=[],n=(a("6762"),a("2fdb"),a("be94")),o=(a("28a5"),a("5df3"),a("4f7f"),a("2909")),r=(a("ac6a"),a("96cf"),a("1da1")),c=a("2f62"),l=a("80f2"),d=a("3ceb"),u=a("9669"),m=a("6e86"),h=a("c9b7"),p=a("98ad"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"table",staticStyle:{width:"100%","margin-top":"0"},attrs:{data:e.tableData,height:"100%"},on:{"row-click":e.selectRow}},[a("el-table-column",{attrs:{prop:"ApplicationFormName",label:"申请单",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.ApplicationFormName))])]}}])}),a("el-table-column",{attrs:{prop:"Status",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"status"},[a("span",{staticClass:"bg",class:"bg"+t.row.Status},[e._v(e._s(e._f("statusFilter")(t.row.Status,1,e.statusOptions)))])])]}}])}),a("el-table-column",{attrs:{prop:"OrderDetails",label:"检查项目","min-width":"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"advice-content"},[a("div",{staticClass:"advice-content-content"},e._l(t.row.OrderDetails,function(t,s){return a("p",{key:s},[e._v(e._s(t.DictItemName)+"  "+e._s(t.SampleName)+"  ")])}),0),t.row.CheckFormModel?a("div",{staticClass:"jianca"},[t.row.CheckFormModel.IsBed?a("span",{staticClass:"icon-bed"}):e._e(),t.row.CheckFormModel.IsEmergency?a("span",{staticClass:"icon-urgency"}):e._e()]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"WordsType",label:"媒介项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.Medium))])]}}])}),a("el-table-column",{attrs:{prop:"EffectiveTime",label:"造影剂"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.ContrastAgent))])]}}])}),a("el-table-column",{attrs:{prop:"CheckFormModel",label:"检查科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.ExcuteDepartmentName))])]}}])}),a("el-table-column",{attrs:{prop:"Price",label:"费用","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("price")(t.row.CheckFormModel,t.row.OrderDetails)))])]}}])}),a("el-table-column",{attrs:{prop:"CreateUserName",label:"申请人"}}),a("el-table-column",{attrs:{label:"申请时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("timeFilter")(t.row.CheckFormModel.ApplyTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("dd",null,{scope:t})]}}])})],1)},f=[],b=a("d634"),D={data:function(){return{statusOptions:b["D"]}},props:{tableData:{type:Array,default:function(){return[]}},callback:{type:Function,default:function(){}}},methods:{selectRow:function(e){this.callback(e)}},filters:{price:function(e,t){var a=0;if(t.length>0)return t.forEach(function(e){a+=e.Price}),(+a).toFixed(2)}}},I=D,C=(a("0f2c"),a("2877")),k=Object(C["a"])(I,g,f,!1,null,"fa73e7ac",null),v=k.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"table",attrs:{data:e.deatilData}},[a("el-table-column",{attrs:{prop:"ApplicationFormName",label:"申请单"}}),a("el-table-column",{attrs:{prop:"OrderDetails",label:"检查项目",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"advice-content"},[a("div",{staticClass:"advice-content-content"},[e._l(t.row.OrderDetails,function(s,i){return t.row.OrderDetails?a("p",{key:i},[e._v(e._s(s.DictItemName)+"  "+e._s(s.SampleName)+"  ")]):e._e()}),e._l(t.row.CheckDetailModels,function(s,i){return t.row.CheckDetailModels?a("p",{key:i},[e._v(e._s(s.DictItemName)+"  ")]):e._e()})],2),t.row.CheckFormModel?a("div",{staticClass:"jianca"},[t.row.CheckFormModel.IsBed?a("span",{staticClass:"icon-bed"}):e._e(),t.row.CheckFormModel.IsEmergency?a("span",{staticClass:"icon-urgency"}):e._e()]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"WordsType",label:"媒介项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.Medium))])]}}])}),a("el-table-column",{attrs:{prop:"EffectiveTime",label:"造影剂"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.CheckFormModel.ContrastAgent))])]}}])}),a("el-table-column",{attrs:{prop:"CheckFormModel",label:"检查科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("departmentFilter")(t.row.CheckFormModel.ExcuteDepartment,e.allDep)))])]}}])}),a("el-table-column",{attrs:{prop:"Price",label:"费用",type:"index",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("price")(t.row.OrderDetails||t.row.CheckDetailModels)))])]}}])}),a("el-table-column",{attrs:{prop:"CreateUserName",label:"申请人"}}),a("el-table-column",{attrs:{label:"申请时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("timeFilter")(t.row.CheckFormModel.ApplyTime)))])]}}])})],1)},T=[],w={props:{deatilData:{type:Array,default:function(){return[]}}},computed:Object(n["a"])({},Object(c["b"])({allDep:"public/GET_ALLDEPARTMENTS"})),filters:{price:function(e){var t=0;if(e.length>0)return e.forEach(function(e){t+=e.Price}),(+t).toFixed(2)}}},x=w,M=(a("93bb"),Object(C["a"])(x,y,T,!1,null,"51168975",null)),S=M.exports,O=a("566b"),_=a("fdda"),N=a("3943"),A=a("ea5b"),E=a("5657"),F={name:"examine",data:function(){return this.num=0,{treeData:[],depTreeData:[],personTreeData:[],defaultExpanded:{1:[1],2:[1],3:[1]},usedCheckData:[],selectData:1,treeName:"",tabsList:[{label:"检查",value:1},{label:"科室",value:2},{label:"个人",value:3}],tablsId:-1,tabls:[{Items:[],Details:{},Name:"申请单一",Id:-1,isOrder:!1,requestId:"",guId:""}],nowTemp:"newCreateExamine",tabsTemp:[{Text:"新建检查",Value:"newCreateExamine",Show:!0},{Text:"检查记录",Value:"historyExamine",Show:!0}],historyListData:[],oldData:[],tableData:[],saveSuccessData:[],tabsIndex:0,isFooter:!0,treeType:"examine",oneTabs:{},timer:null,departmentCodeList:[],caSignOperation:{},currentObjData:"",leftWidth:200}},watch:{"patientMsg.Status":{handler:function(e){var t=this;8===e?(this.tabsTemp[0].Show=!1,this.nowTemp="historyExamine",this.$Api.getCheckHistory({patientId:this.patientMsg.PatientId}).then(function(e){e.Status&&(t.historyListData=e.Data||[],console.log(e),t.$nextTick(function(){t.historyListData.length>0&&(t.$refs.historyList.selectId=t.historyListData[0].InHospitalId,t.historyListData[0]&&t.getCheckTableData(t.historyListData[0].InHospitalId))}))})):(this.tabsTemp[0].Show=!0,this.nowTemp="newCreateExamine")},deep:!0,immediate:!0},isGetCA:function(e){e&&this.currentObjData.Data&&"检查申请"==this.currentObjData.Data[0].Name&&this.caSignOperation.checkData(this.user.UserInfo,this.currentObjData)}},methods:{isMedicalInsuranceMsg:function(e){var t=this;return new Promise(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(a,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$Api.medicalInsuranceMsg(data);case 2:i=e.sent,i.Data?t.$confirm(i.Data,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,type:"warning"}).then(function(){a(!0)}).catch(function(){a(!1)}):a(!1);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())},changrequestId:function(e,t){console.log(t,e,"111"),t.requestId=e,console.log(this.tabls)},tabChange:function(e){},getOrderPackageDepartment:function(){var e=this;this.$Api.getOrderPackageDepartment({keyWord:this.treeName?this.treeName:null,diagnosisKeyWord:this.patientMsg.Diagnosis?this.patientMsg.Diagnosis:null,symptomKeyWord:this.patientMsg.Symptom?this.patientMsg.Symptom:null,orderType:7}).then(function(t){t.Status?e.depTreeData=t.Data||[]:e.depTreeData=[]})},getOrderPackagePersonl:function(){var e=this;this.$Api.getOrderPackagePersonl({keyWord:this.treeName?this.treeName:null,orderType:7}).then(function(t){t.Status?e.personTreeData=t.Data||[]:e.personTreeData=[]})},selectOrderPackage:function(e,t,a){this.defaultExpanded[this.selectData]=[a],console.log(e,t,a,"patientKey")},selectPackage:function(e,t){var a=this;if(console.log("data",e,t),1==this.selectData)if(t.ItemCode&&e)this.$Api.postUsedDeatil({CategoryCode:t.ParentCode,SearchType:7,KeyWord:"",DeptCode:"",DictItemCode:t.ItemCode,HisRegisterId:this.patientMsg.RegistId}).then(function(e){console.log(e,"selectData"),e.Status&&e.Data&&(console.log(e.Data,"111"),e.Data.Check[0]&&a.addData(e.Data.Check[0],-1,"",t))});else{console.log(this.tabls,e,"bl"),this.tabls.forEach(function(e){e.Items.forEach(function(s,i){s.DictItemCode!==t.ItemCode||e.isOrder||(e.Items.splice(i,1),a.tablsId=e.Id)})});for(var s=!1,i=0;i<this.tabls.length;i++)this.tabls.length>1&&0==this.tabls[i].Items.length&&(this.tabls.splice(i,1),i--,s=!0);s&&(this.tablsId=this.tabls[this.tabls.length-1].Id),1==this.tabls.length&&0===this.tabls[0].Items.length&&(this.tabls=[{Items:[],Details:{},Name:"申请单一",Id:-1,isOrder:!1,guId:""}],this.tablsId=-1),this.clearData()}else{if(e){console.log(t,"row");var n={PackageId:t.Id,OrderType:7};this.$Api.getSetMealDeatil(n).then(function(e){if(e.Status){for(var s,i=e.Data||[],n=[],o=0;o<i.length;o++)n.push({Items:i[o].OrderDetails,Details:{ExcuteDepartment:i[o].CheckFormModel.ExcuteDepartment,Attention:i[o].CheckFormModel.Attention,ContrastAgent:i[o].CheckFormModel.ContrastAgent,DiagnosisAreaType:i[o].CheckFormModel.DiagnosisAreaType,EffectiveTime:i[o].CheckFormModel.EffectiveTime,IsAdditional:i[o].CheckFormModel.IsAdditional,IsBed:i[o].CheckFormModel.IsBed,IsEmergency:i[o].CheckFormModel.IsEmergency,Medium:i[o].CheckFormModel.Medium,OrderType:7,Remark:i[o].CheckFormModel.Remark,Target:i[o].CheckFormModel.Target},Name:i[o].CheckFormModel.ApplicationFormName,Id:a.num++,isOrder:!0,guId:t.Id});if(-1==a.tabls[0].Id)a.tabls=n,console.log(11111);else(s=a.tabls).push.apply(s,n);a.tablsId=a.tabls[a.tabls.length-1].Id,a.oneTabs=a.tabls[a.tabls.length-1],console.log("this.oneTabs",a.oneTabs)}})}else{console.log("this.tabls",this.tabls);for(var o=0;o<this.tabls.length;o++)this.tabls[o].guId==t.Id&&this.tabls[o].isOrder&&(console.log("this.tabls",this.tabls),this.tabls.splice(o,1),o--);0==this.tabls.length?(this.tabls=[{Items:[],Details:{},Name:"申请单一",Id:-1,isOrder:!1,guId:""}],this.tablsId=this.tabls[0].Id,this.oneTabs=this.tabls[0]):(this.tablsId=this.tabls[this.tabls.length-1].Id,this.oneTabs=this.tabls[this.tabls.length-1],console.log("this.oneTabs",this.oneTabs))}this.clearData()}},getMenu:function(){1==this.selectData?this.getCheckTreeData():2==this.selectData?this.getOrderPackageDepartment():3==this.selectData&&this.getOrderPackagePersonl()},clearData:function(){var e=this;this.tabls.length<=1&&(console.log("this",this.tabls),this.tabls[0]&&this.tabls[0].Items&&0==this.tabls[0].Items.length&&(console.log(11111,this.tabls[0]),this.tabls=[],this.$nextTick(function(){e.tabls=[{Items:[],Details:{},Name:"申请单一",Id:-1,isOredr:!1,guId:""}],e.tablsId=-1})))},tapsExamine:function(e){var t=this;this.cancel(),"historyExamine"===e&&this.$Api.getCheckHistory({patientId:this.patientMsg.PatientId}).then(function(e){e.Status&&(t.historyListData=e.Data||[],console.log(e),t.$nextTick(function(){t.historyListData.length>0&&(t.$refs.historyList.selectId=t.historyListData[0].InHospitalId,t.historyListData[0]&&t.getCheckTableData(t.historyListData[0].InHospitalId))}))})},add:function(e,t){console.log(e),this.addData(e,t,"input")},save:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isFooter=!0,a=[],this.oldData=[],s=0;case 4:if(!(s<this.$refs.inspect.length)){e.next=11;break}return e.next=7,this.$refs.inspect[s].submitForm();case 7:a[s]=e.sent;case 8:s++,e.next=4;break;case 11:console.log(a),s=0;case 13:if(!(s<a.length)){e.next=20;break}if(a[s]){e.next=17;break}return this.$msg.info("".concat(this.tabls[s].Name,"有必填项未输入,不能提交")),e.abrupt("return");case 17:s++,e.next=13;break;case 20:for(i=0;i<a.length;i++)a[i].ApplicationFormName=this.tabls[i].Name,a[i].ApplicationFormNo=this.tabls[i].requestId;this.$Api.postAxamineAll(a).then(function(e){if(n.$msg[e.Status?"success":"warning"](e.Message),e.Status){console.log(e);for(var t=0;t<e.Data.length;t++)e.Data[t]["Index"]=t+1;n.saveSuccessData=e.Data,n.$store.commit("public/SET_ISSHOW",!0)}});case 22:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),cancel:function(e){var t=this;this.tabls=[],this.$nextTick(function(){t.tabls=[{Items:[],Details:{},Name:"申请单一",Id:-1,isOredr:!1,guId:""}],t.tablsId=-1,t.oneTabs={},t.selectOldData({}),t.depTreeData=t.setMealCheck(JSON.parse(JSON.stringify(t.depTreeData))),t.personTreeData=t.setMealCheck(JSON.parse(JSON.stringify(t.personTreeData)))})},historyCall:function(e){console.log(e),this.getCheckTableData(e)},getCheckTableData:function(e){var t=this;this.$Api.getCheckTableData({inHouseId:e}).then(function(e){if(console.log(e),e.Status){for(var a=0;a<e.Data.length;a++)e.Data[a]["Index"]=a+1;t.tableData=e.Data}})},showTable:function(e){console.log(e),this.tabls=[{Items:[],Details:{},Name:e.CheckFormModel.ApplicationFormName,requestId:e.CheckFormModel.ApplicationFormNo,Id:this.num++,isOredr:!1,guId:""}],e.CheckFormModel.FormId="00000000-0000-0000-0000-000000000000",e.CheckFormModel.InHouseId="00000000-0000-0000-0000-000000000000",e.CheckFormModel.ApplyTime=Object(h["a"])(),delete e.CheckFormModel.Diagnosis,delete e.CheckFormModel.DiagnosisCode;for(var t=0;t<e.OrderDetails.length;t++)e.OrderDetails[t].CheckId="00000000-0000-0000-0000-000000000000",e.OrderDetails[t].ItemId="00000000-0000-0000-0000-000000000000";this.tabls[0].Items=e.OrderDetails,this.tabls[0].Details=e.CheckFormModel,this.nowTemp="newCreateExamine",this.tablsId=this.tabls[0].Id,console.log(this.tabls)},addData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a,s,i){var c,l,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.oneTabs.isOrder||"input"!==s){e.next=24;break}c=a<0?{}:this.oneTabs.Items[a],l=0;case 3:if(!(l<this.oneTabs.Items.length)){e.next=10;break}if(this.oneTabs.Items[l].DictItemCode!==t.HisMedId){e.next=7;break}return this.$msg.warning("不允许重复添加相同的检查项"),e.abrupt("return");case 7:l++,e.next=3;break;case 10:return c["DictItemCode"]=t.HisMedId,c["ItemType"]=t.OrderItemType,c["DictItemName"]=t.ItemName,c["Price"]=t.Price,c["IsDeleted"]=!1,c["_edit"]=!1,c["ParentCategoryCode"]=t.CategoryNo,c["NewDepartmentList"]=t.Department?Object(o["a"])(new Set(t.Department.split(","))):[],e.next=20,this.isMedicalInsuranceMsg({HisRegisterId:this.patientMsg.RegistId,HisMedId:t.HisMedId,OrderType:7});case 20:c.InsuranceUseFlag=e.sent,a<0&&this.oneTabs.Items.push(c),e.next=25;break;case 24:this.$Api.getParentCode({code:t.CategoryNo,type:7}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(s){var r,c,l,u,m,p,g;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=s.Data||"",c=a<0?{}:d.tabls[d.active].Items[a],l=0;case 3:if(!(l<d.tabls.length)){e.next=16;break}u=0;case 5:if(!(u<d.tabls[l].Items.length)){e.next=13;break}if(d.tabls[l].Items[u].DictItemCode!==t.HisMedId||a==u){e.next=10;break}return d.$msg.warning("不允许重复添加相同的检查项"),i&&i.ItemCode===d.tabls[l].Items[u].DictItemCode&&(i.isCheck=!1),e.abrupt("return");case 10:u++,e.next=5;break;case 13:l++,e.next=3;break;case 16:return c["DictItemCode"]=t.HisMedId,c["ItemType"]=t.OrderItemType,c["DictItemName"]=t.ItemName,c["Price"]=t.Price,c["IsDeleted"]=!1,c["_edit"]=!1,c["ParentCategoryCode"]=t.CategoryNo,c["NewDepartmentList"]=t.Department?Object(o["a"])(new Set(t.Department.split(","))):[],e.next=26,d.isMedicalInsuranceMsg({HisRegisterId:d.patientMsg.RegistId,HisMedId:t.HisMedId,OrderType:7});case 26:c.InsuranceUseFlag=e.sent,m=!0,1===d.tabls.length&&-1===d.tabls[0].Id?(d.tabls[0].Items.push(c),d.tabls[0].Details={ExcuteDepartment:""},d.tabls[0].Name=r||"申请单一",d.tabls[0].Id=d.num++,d.tablsId=d.tabls[0].Id,m=!1):(p=d.isBast(t.Department),g=d.isName(r,c.NewDepartmentList),2==d.requestRule?a<0&&p&&g&&(d.tabls[g["i"]].Items.push(c),d.tablsId=d.tabls[g["i"]].Id,m=!1):a<0&&p&&(d.tabls[p["i"]].Items.push(c),d.tablsId=d.tabls[p["i"]].Id,m=!1)),m&&a<0&&(d.tabls.push({Items:[Object(n["a"])({},c)],Details:{ExcuteDepartment:""},Name:r||"申请单"+Object(h["q"])(l+1),Id:d.num++}),d.tablsId=d.tabls[d.tabls.length-1].Id);case 30:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 25:case"end":return e.stop()}},e,this)}));function t(t,a,s,i){return e.apply(this,arguments)}return t}(),usedSelect:function(e){var t=this;console.log(e),this.$Api.postUsedDeatil({CategoryCode:e.CategoryCode,SearchType:7,KeyWord:"",DeptCode:"",DictItemCode:e.ItemCode,HisRegisterId:this.patientMsg.RegistId}).then(function(e){e.Status&&e.Data&&(console.log(e.Data),e.Data.Check[0]&&t.addData(e.Data.Check[0],-1))})},submitData:function(){if(this.patientMsg.RegistId)if(this.isSignName){var e={Type:"0",Data:[{Name:"检查申请"}],No:this.user.UserInfo.No,UserName:this.user.UserInfo.Name};this.currentObjData=e,this.caSignOperation.KeyVerify()}else this.handleOperation();else if(this.$msg.info("该患者无有效挂号，请先挂号！"),"1"===this.isRegister){var t={title:"患者挂号",width:"800px",component:"registrationAlter",isShowFooter:!0,btn:["挂号","取消"],visible:!0};this.$store.commit("public/SET_DIALOGDATA",t)}},handleOperation:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$IMIS.submmitOrderIMIS(this.saveSuccessData,this.patientMsg);case 3:if(t=e.sent,t){e.next=6;break}return e.abrupt("return");case 6:e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:for(a={InHouseId:this.$route.query.id||this.patientMsg.InHouseId,OrderList:[],HisRegisterId:this.patientMsg.RegistId,CASignImg:this.caImgData},s=0;s<this.saveSuccessData.length;s++)a.OrderList.push(this.saveSuccessData[s].OrderId);console.log(a),this.$Api.submitAdvice(a).then(function(e){if(i.$msg[e.Status?"success":"warning"](e.Message),console.log(e),e.Status){var t="",s="",n="",o=a.OrderList.length,r=e.Data.PrescriptionInfo||[];if(r.forEach(function(e){t+=e.PrescriptionMasterNo+",",s+=b["x"]["CheckLargeEquipment"].objectType+",",n+=b["x"]["CheckLargeEquipment"].templateId+","}),a.OrderList.forEach(function(e,a){t+=e,o-1!=a&&(t+=","),s+=b["x"].examine.objectType+",",n+=b["x"].examine.templateId+","}),""!=t){clearTimeout(i.timer);var c=(new Date).getTime(),l="".concat(URLCONFIG.Emr,"/Nursing/EditPage.aspx?patientId=").concat(i.patientMsg.PatientId,"&inHouseId=").concat(i.patientMsg.InHouseId,"&areaType=").concat(i.patientMsg.AreaType,"&createUser=940c7df7-a718-e911-80cd-0050568e1b08&objectType=").concat(b["x"].specialDrugBatch.objectType,"&ObjectTypes=").concat(s.slice(0,s.length-1),"&TemplateIds=").concat(n.slice(0,n.length-1),"&logUserEditTrack=true&documentId=f2f201db-3ca2-47b0-ba81-ab6b0096abd6&mark=true&templateId=").concat(b["x"].examine.templateId,"&ids=").concat(t,"&ismult=true&t=").concat(c);console.log(l),i.$store.commit("public/SET_PRINTIFRAMEURL",l)}i.$store.commit("public/SET_ISSHOW",!1),"newCreateExamine"===i.nowTemp?i.cancel():i.getCheckTableData(i.$refs.historyList.selectId)}else i.refreshOrderStatus()}).catch(function(e){i.refreshOrderStatus()});case 14:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),upData:function(){this.dataToData()},alterCallback:function(e){"newCreateExamine"==this.nowTemp?this.dataToData():this.$store.commit("public/SET_ISSHOW",!1)},dataToData:function(){for(var e=[],t=0;t<this.saveSuccessData.length;t++)this.saveSuccessData[t].CheckFormModel.Diagnosis=this.saveSuccessData[t].CheckFormModel.Diagnosis.substring(0,this.saveSuccessData[t].CheckFormModel.Diagnosis.length-1),this.saveSuccessData[t].CheckFormModel.DiagnosisCode=this.saveSuccessData[t].CheckFormModel.DiagnosisCode.substring(0,this.saveSuccessData[t].CheckFormModel.DiagnosisCode.length-1),this.saveSuccessData[t].CheckFormModel.Diagnosis.indexOf(";")>-1?(this.saveSuccessData[t].CheckFormModel.Diagnosis=this.saveSuccessData[t].CheckFormModel.Diagnosis.split(";"),this.saveSuccessData[t].CheckFormModel.DiagnosisCode=this.saveSuccessData[t].CheckFormModel.DiagnosisCode.split(";")):(this.saveSuccessData[t].CheckFormModel.Diagnosis=[this.saveSuccessData[t].CheckFormModel.Diagnosis],this.saveSuccessData[t].CheckFormModel.DiagnosisCode=[this.saveSuccessData[t].CheckFormModel.DiagnosisCode]),this.saveSuccessData[t].CheckFormModel.OrderId=this.saveSuccessData[t].OrderId,e.push({Items:this.saveSuccessData[t].OrderDetails||this.saveSuccessData[t].CheckDetailModels,Details:this.saveSuccessData[t].CheckFormModel,Name:this.saveSuccessData[t].ApplicationFormName,requestId:this.saveSuccessData[t].ApplicationFormNo,Id:this.tabls[t].Id,isOrder:!!this.tabls[t].guId,guId:this.tabls[t].guId});this.tabls=e,this.tablsId=this.tabls[0].Id,this.oneTabs=this.tabls[0],this.$store.commit("public/SET_ISSHOW",!1),this.nowTemp="newCreateExamine",console.log(this.tabls)},selectRow:function(e){this.saveSuccessData=[Object(n["a"])({},e,{ApplicationFormName:e.CheckFormModel.ApplicationFormName,ApplicationFormNo:e.CheckFormModel.ApplicationFormNo})],console.log(e,"row"),this.$store.commit("public/SET_ISSHOW",!0),1==e.Status?this.isFooter=!0:this.isFooter=!1},tablsChange:function(e){console.log(e);for(var t=0;t<this.tabls.length;t++)e===this.tabls[t].Id&&(this.tabsIndex=t,this.oneTabs=this.tabls[t]);console.log(e,this.oneTabs)},print:function(e){clearTimeout(this.timer);var t=(new Date).getTime(),a=window.location.protocol+"\\"+window.location.host,s="".concat(URLCONFIG.Emr,"/Nursing/EditPage.aspx?patientId=").concat(this.patientMsg.PatientId,"&inHouseId=").concat(this.patientMsg.InHouseId,"&areaType=").concat(this.patientMsg.AreaType,"&createUser=940c7df7-a718-e911-80cd-0050568e1b08&originUrl=").concat(a,"&objectType=").concat(b["x"].examine.objectType,"&logUserEditTrack=true&documentId=f2f201db-3ca2-47b0-ba81-ab6b0096abd6&mark=true&templateId=").concat(b["x"].examine.templateId,"&orderid=").concat(e.OrderId,"&areaId=").concat(this.patientMsg.AreaId,"&t=").concat(t);console.log(s,"11111ffffff"),this.$store.commit("public/SET_PRINTIFRAMEURL",s)},delItem:function(e,t){var a=this;this.$confirm("该操作将删除该申请单,是否继续?","",{type:"warning"}).then(function(){var e=a.tabls.splice(t,1);a.tablsId=a.tabls[a.tabls.length-1].Id,a.tabsIndex=a.tabls.length-1,a.delOldData(a.treeData,e[0].Items)}).catch(function(){a.$msg.info("已取消操作")})},getCheckTreeData:function(){var e=this;this.$Api.getCheckTreeData({queryKey:this.treeName?this.treeName:null}).then(function(t){console.log("this.treeData",t),t.Status&&(e.treeData=t.Data||[],console.log("this.treeData",e.treeData))})},setArr:function(e,t){var a={};return e=e.reduce(function(e,s){return!a[s[t]]&&(a[s[t]]=e.push(s)),e},[]),console.log(e),e},isChenk:function(e){for(var t=0;t<e.length;t++)e[t]["isCheck"]=!1,e[t].ChildCategory&&this.isChenk(e[t].ChildCategory);return e},setMealCheck:function(e){console.log("data",e);for(var t=0;t<e.length;t++)e[t]["isCheck"]=!1,e[t].detailInfoList&&this.setMealCheck(e[t].detailInfoList);return e},delRow:function(e){if(e){console.log(this.oneTabs,e,"111"),this.oneTabs.Name&&this.oneTabs.isOrder||this.selectOldData(e);for(var t=0;t<this.tabls.length;t++)0===this.tabls[t].Items.length&&this.tabls.length>1&&(console.log(111111,"qqqqq"),this.tabls.splice(t,1));this.tablsId=this.tabls[this.tabls.length-1].Id,this.oneTabs=this.tabls[this.tabls.length-1]}this.clearData()},selectOldData:function(e){for(var t=this.$refs.treeList&&this.$refs.treeList.getData(),a=0;a<t.length;a++)if((t[a].ItemCode===e.DictItemCode||!e.DictItemCode)&&(t[a]._select=!1,e.DictItemCode))break},delOldData:function(e,t){console.log(e,t,"tablelisttableList");for(var a=this.$refs.treeList&&this.$refs.treeList.getData(),s=0;s<t.length;s++)for(var i=0;i<a.length;i++)if(a[i].ItemCode==t[s].DictItemCode){a[i]._select=!1;break}},delTreeCombo:function(e){for(var t=0;t<e.length;t++);},getParentCode:function(e,t,a){this.$Api.getParentCode({code:e.HisMedId,type:7}).then(function(e){console.log(e)})},isBast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(e,"bvall");for(var t=e.split(","),a=0;a<this.tabls.length;a++)for(var s=0;s<t.length;s++)if(this.tabls[a].requestId==t[s])return{i:a}},isName:function(e,t){console.log(e,"name",t);for(var a=0;a<this.tabls.length;a++)if(this.tabls[a].Name===e&&t.includes(this.tabls[a].requestId))return console.log(this.tabls[a].Name===e),{i:a}},refreshOrderStatus:function(){this.$Api.refreshOrderStatus({inHospitalId:this.$route.query.id||this.patientMsg.InHouseId}).then(function(e){})},searchList:function(){this.debouceElg()}},computed:Object(n["a"])({},Object(c["b"])({patientMsg:"public/GET_PATIENTMSG",isShow:"public/GET_ISSHOW",isRegister:"configuration/GET_ISREGISTER",requestRule:"configuration/GET_CHECKRULE",signName:"public/GET_SIGNNAME",isSignName:"public/GET_ISSIGNNAME",isGetCA:"public/GET_ISGETCA",user:"public/GET_USER",caImgData:"public/GET_CAIMGDATA"}),{active:function(){for(var e=0;e<this.tabls.length;e++)if(this.tablsId==this.tabls[e].Id)return this.tabsIndex=e,console.log(this.tabsIndex,"qq"),this.tabsIndex},isExpand:function(){return!!this.treeName}}),created:function(){var e=this,t=Object(E["a"])(this.user.UserInfo.No)||{};this.leftWidth=t.examineW||200,this.debouceElg=Object(h["g"])(this.getMenu,500),this.$Api.getAxamineUsed({}).then(function(t){t.Status&&(e.usedCheckData=t.Data)}),this.getCheckTreeData(),this.getOrderPackageDepartment(),this.getOrderPackagePersonl(),this.isSignName&&(this.caSignOperation=new N["a"](this,this.signName))},mounted:function(){this.$refs.treeLeft;var e=this.$refs.resizeLine,t=this;e.onmousedown=function(a){var s=a.clientX;e.left=e.offsetLeft,document.onmousemove=function(a){var i=a.clientX,n=e.left+(i-s);n=n<200?"200":n,n=n>500?"500":n,t.leftWidth=n-20;var o=t.user.UserInfo.No,r=Object(E["a"])(o)||{};r.examineW=t.leftWidth,Object(E["b"])(o,r),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,e.releaseCapture&&e.releaseCapture()}}},components:{medicalNowTree:_["a"],startRequest:l["a"],inspectDoctorAdvice:d["a"],searchDoctorAdvice:u["a"],historyList:m["a"],myAlert:p["a"],examinTable:v,examinDetail:S,myTabs:O["a"],treeTable:A["a"]}},$=F,L=(a("7d5b"),Object(C["a"])($,s,i,!1,null,"ab103f26",null));t["default"]=L.exports}}]);
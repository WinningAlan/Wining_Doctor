(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-993103d6"],{"31fd":function(e,t,o){},"333b":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bloodDoctorAdvice doctor-advice"},[o("el-form",{ref:"inspectDoctorAdvice",staticClass:"doctor-advice-form",attrs:{model:e.commonData,rules:e.isVerification?e.rules:e.rulesNull,"label-position":"right","label-width":"80px"}},[o("el-form-item",{staticClass:"blood-type",attrs:{label:"血型"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.BloodType,callback:function(t){e.$set(e.commonData,"BloodType",t)},expression:"commonData.BloodType"}},e._l(e.bloodTypeOptions,function(e){return o("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1),o("el-form-item",{staticClass:"effective",attrs:{label:"RH",prop:"RH"}},[o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.RH,callback:function(t){e.$set(e.commonData,"RH",t)},expression:"commonData.RH"}},[o("el-radio-button",{attrs:{label:"阴性"}},[e._v("阴")])],1),o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.RH,callback:function(t){e.$set(e.commonData,"RH",t)},expression:"commonData.RH"}},[o("el-radio-button",{attrs:{label:"阳性"}},[e._v("阳")])],1)],1)],1),o("el-form-item",{staticClass:"effective screening",attrs:{label:"不规则抗体筛查",prop:"IrregularAntibodyScreening"}},[o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.IrregularAntibodyScreening,callback:function(t){e.$set(e.commonData,"IrregularAntibodyScreening",t)},expression:"commonData.IrregularAntibodyScreening"}},[o("el-radio-button",{attrs:{label:!0}},[e._v("是")])],1),o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.IrregularAntibodyScreening,callback:function(t){e.$set(e.commonData,"IrregularAntibodyScreening",t)},expression:"commonData.IrregularAntibodyScreening"}},[o("el-radio-button",{attrs:{label:!1}},[e._v("否")])],1)],1),o("el-form-item",{staticClass:"effective blood-type",attrs:{label:"血源",prop:"BloodSource"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.BloodSource,callback:function(t){e.$set(e.commonData,"BloodSource",t)},expression:"commonData.BloodSource"}},e._l(e.bloodsourceOptions,function(e){return o("el-option",{key:e.Value,attrs:{label:e.Text,value:e.Value+""}})}),1),o("el-form-item",{staticClass:"effective",attrs:{label:"目的",prop:"Target"}},[o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.Target,callback:function(t){e.$set(e.commonData,"Target",t)},expression:"commonData.Target"}},[o("el-radio-button",{attrs:{label:"手术"}},[e._v("手术")])],1),o("el-radio-group",{attrs:{"text-color":"#0071E7",fill:"rgba(0,113,231,0.10)"},model:{value:e.commonData.Target,callback:function(t){e.$set(e.commonData,"Target",t)},expression:"commonData.Target"}},[o("el-radio-button",{attrs:{label:"治疗"}},[e._v("治疗")])],1)],1)],1),o("el-form-item",{staticClass:"rests",attrs:{label:"其他",prop:"donateBlood"}},[o("el-checkbox-group",{model:{value:e.commonData.BloodTransfusion,callback:function(t){e.$set(e.commonData,"BloodTransfusion",t)},expression:"commonData.BloodTransfusion"}},[o("el-checkbox-button",{attrs:{label:!0}},[e._v("输血史")])],1),o("el-checkbox-group",{model:{value:e.commonData.BloodDonationHistory,callback:function(t){e.$set(e.commonData,"BloodDonationHistory",t)},expression:"commonData.BloodDonationHistory"}},[o("el-checkbox-button",{attrs:{label:!0}},[e._v("献血史")])],1),o("el-checkbox-group",{model:{value:e.commonData.Pregnancy,callback:function(t){e.$set(e.commonData,"Pregnancy",t)},expression:"commonData.Pregnancy"}},[o("el-checkbox-button",{attrs:{label:!0}},[e._v("孕")])],1),o("el-checkbox-group",{model:{value:e.commonData.Fecunditv,callback:function(t){e.$set(e.commonData,"Fecunditv",t)},expression:"commonData.Fecunditv"}},[o("el-checkbox-button",{attrs:{label:!0}},[e._v("产")])],1)],1),e._l(e.bloodData,function(t,a){return o("el-form-item",{key:a,staticClass:"unit",attrs:{label:t.text,prop:t.key}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.commonData[t.key],callback:function(o){e.$set(e.commonData,t.key,o)},expression:"commonData[item.key]"}})],1)}),o("el-form-item",{attrs:{label:"用血时间",prop:"UseTime"}},[o("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.changeTime},model:{value:e.commonData.UseTime,callback:function(t){e.$set(e.commonData,"UseTime",t)},expression:"commonData.UseTime"}})],1),o("el-form-item",{staticClass:"effective",attrs:{label:"执行科室",prop:"ExcuteDepartment"}},[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:e.commonData.ExcuteDepartment,callback:function(t){e.$set(e.commonData,"ExcuteDepartment",t)},expression:"commonData.ExcuteDepartment"}},e._l(e.allDep,function(e){return o("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),o("el-form-item",{attrs:{label:"申请时间",prop:"ApplyTime"}},[o("el-date-picker",{attrs:{clearable:!1,"picker-options":e.pickerOptions,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.changeTime},model:{value:e.commonData.ApplyTime,callback:function(t){e.$set(e.commonData,"ApplyTime",t)},expression:"commonData.ApplyTime"}})],1)],2),o("doctorAdviceTable",{attrs:{columns:e.columns,tableData:e.tableData,type:"index",columnsIndex:1,orderType:4},scopedSlots:e._u([{key:"Alias",fn:function(t){var o=t.scope;return[o.row._edit?e._t("change",null,{index:o.row._index,itemName:o.row.ItemName,departmentCode:e.departmentCode}):[e._v(e._s(o.row.ItemName))]]}},{key:"remarks",fn:function(t){var a=t.scope;return[o("el-input-number",{attrs:{placeholder:"数量",min:1,"controls-position":"right"},model:{value:a.row.Count,callback:function(t){e.$set(a.row,"Count",t)},expression:"scope.row.Count"}}),e._v("\n      "+e._s(a.row.Unit)+"\n    ")]}},{key:"BloodWay",fn:function(t){var a=t.scope;return[o("el-select",{attrs:{placeholder:"请选择","automatic-dropdown":""},model:{value:a.row.BloodWay,callback:function(t){e.$set(a.row,"BloodWay",t)},expression:"scope.row.BloodWay"}},e._l(e.BloodWay,function(e,t){return o("el-option",{key:t,attrs:{label:e.Text,value:e.Value+""}})}),1)]}}])}),e._t("search",null,{departmentCode:e.departmentCode}),e._t("default",null,{submitForm:e.submitForm})],2)},n=[],l=o("be94"),r=o("2e7f"),i=(o("6351"),o("d634")),c=o("14c8"),s=o("c9b7"),m=o("2f62"),u={name:"bloodDoctorAdvice",components:{doctorAdviceTable:c["a"]},props:{tableData:{type:Array,required:!0},commonObj:{type:Object,required:!0},isChange:{type:Boolean,default:!1},isVerification:{type:Boolean,default:!0}},data:function(){return{blway:"",pickerOptions:{disabledDate:function(e){return e.getTime()<+new Date(Object(s["a"])("yyyy/MM/dd",new Date)+" 00:00:00")}},rules:{BloodType:[{required:!0,message:"请输入血型",trigger:"blur"}],BloodSource:[{required:!0,message:"请输入血源",trigger:"change"}],Target:[{required:!0,message:"请输入输血目的",trigger:"change"}],UseTime:[{required:!0,message:"请输入用血时间",trigger:"blur"}],ApplyTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}],ExcuteDepartment:[{required:!0,message:"请输入执行科室",trigger:"change"}],RH:[{required:!0,message:"请选择用法",trigger:"change"}]},rulesNull:{},columns:r["a"],bloodData:i["c"],commonData:{OrderType:4,Id:"00000000-0000-0000-0000-000000000000",InHouseId:"00000000-0000-0000-0000-000000000000",DiagnosisAreaType:0,Target:"",BloodType:"",BloodSource:"",RH:"",Pregnancy:!1,BloodTransfusion:!1,BloodDonationHistory:!1,Fecunditv:!1,IrregularAntibodyScreening:!1,Diagnosis:"",Alt:"",HbsAg:"",HbsAb:"",HbeAg:"",HbeAb:"",HBcAb:"",AntiHcv:"",AntiHiv:"",Syphilis:"",Leukocyte:"",Hemoglobin:"",Platelet:"",ApplyDepartment:0,ApplyTime:"",UseTime:"",ExcuteDepartment:"",IsUrgent:!0,HisNumber:""}}},created:function(){var e=this;console.log(this.dict,"3333"),this.commonData.DiagnosisAreaType=this.selectArea.DiagnosisAreaType,this.nowTime=this.commonData.ApplyTime=this.commonData.ApplyTime?this.commonData.ApplyTime:Object(s["a"])(),this.commonData.UseTime=this.commonData.UseTime?this.commonData.UseTime:Object(s["a"])(),this.pickerOptions.disabledDate=function(t){return t.getTime()<+new Date(Object(s["a"])("yyyy/MM/dd",new Date(e.patientMsg.InHospTime))+" 00:00:00")}},computed:Object(l["a"])({},Object(m["b"])({patientMsg:"public/GET_PATIENTMSG",selectArea:"home/GET_SELECTAREA",bloodTypeOptions:"public/GET_BLOODTYPES",allDep:"public/GET_ALLDEPARTMENTS"}),{departmentCode:function(){var e=this.tableData.filter(function(e){return!e.IsDeleted});return e.length?this.commonData.ExcuteDepartment:""},bloodsourceOptions:function(e){return this.$store.getters["public/getDic"]("BloodSource")&&this.$store.getters["public/getDic"]("BloodSource").filter(function(e){return-1!==e.Value})},BloodWay:function(e){return this.$store.getters["public/getDic"]("BloodWay")&&this.$store.getters["public/getDic"]("BloodWay").filter(function(e){return-1!==e.Value})}}),watch:{commonObj:{handler:function(e,t){for(var o in console.log(e,8888),e)this.commonData[o]=e[o];this.commonData.RH=this.commonData.RH?this.commonData.RH:"阳性"},immediate:!0,deep:!0}},methods:{changeTime:function(e){+new Date(e)<+new Date(this.patientMsg.InHospTime)&&(this.$msg.info("申请时间不允许早于患者入科时间！"),this.commonData.ApplyTime=Object(s["a"])("yyyy/MM/dd HH:mm",new Date(this.patientMsg.InHospTime))),this.commonData.IsAdditional=parseInt(+new Date(e)/6e4)<parseInt(+new Date(this.nowTime)/6e4),console.log(+new Date(e),"time",this.patientMsg.InHospTime),console.log(parseInt(+new Date(e)/6e4),parseInt(+new Date(this.nowTime)/6e4))},submitForm:function(){var e=this;return console.log(this.commonData),new Promise(function(t,o){e.$refs.inspectDoctorAdvice.validate(function(o,a){if(console.log(a),o){e.tableData.length||(e.$msg.info("当前没有医嘱项目，请添加后再保存！"),t(!1));var n=Object(l["a"])({},e.commonData);n.InHouseId=e.$route.query.id,n.DiagnosisAreaType=e.selectArea.DiagnosisAreaType,n.IsUrgent=!0,n.HisNumber="",n.Diagnosis=e.patientMsg.Diagnosis,t({BloodForm:n,BloodFormDetails:e.tableData})}else t(!1),console.log("error submit!!")})})}}},d=u,p=(o("be24"),o("2877")),b=Object(p["a"])(d,a,n,!1,null,null,null);t["a"]=b.exports},6351:function(e,t){},be24:function(e,t,o){"use strict";var a=o("31fd"),n=o.n(a);n.a}}]);
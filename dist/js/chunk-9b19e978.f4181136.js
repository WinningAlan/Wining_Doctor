(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b19e978"],{"0c72":function(t,e,a){"use strict";var i=a("efd4"),s=a.n(i);s.a},"2e7f":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"e",function(){return r}),a.d(e,"q",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"v",function(){return l}),a.d(e,"g",function(){return u}),a.d(e,"o",function(){return d}),a.d(e,"n",function(){return p}),a.d(e,"f",function(){return h}),a.d(e,"m",function(){return m}),a.d(e,"p",function(){return f}),a.d(e,"l",function(){return v}),a.d(e,"i",function(){return g}),a.d(e,"t",function(){return x}),a.d(e,"r",function(){return I}),a.d(e,"w",function(){return D}),a.d(e,"j",function(){return T}),a.d(e,"k",function(){return b}),a.d(e,"h",function(){return w}),a.d(e,"s",function(){return C}),a.d(e,"u",function(){return y}),a.d(e,"c",function(){return _}),a.d(e,"a",function(){return k});var i=a("fccc"),s=a("46a9"),n=[{text:"过敏药物名称",value:"MedicineName"},{text:"皮试日期",value:"SkinTestTime",formatter:s["a"]},{text:"开始时间",value:"StartTime",formatter:s["a"]},{text:"结束时间",value:"EndTime",formatter:s["a"]},{text:"过敏类型",value:"AllergyTypeDesc"}],r=[{text:"过敏食物名称",value:"Name"},{text:"录入日期",value:"InputTime",formatter:s["a"]},{text:"开始日期",value:"StartTime",formatter:s["a"]},{text:"过敏类型",value:"AllergyTypeDesc"}],o=[{text:"过敏造影剂名称",value:"Name"},{text:"录入日期",value:"InputTime",formatter:s["a"]},{text:"开始日期",value:"StartTime",formatter:s["a"]},{text:"过敏类型",value:"AllergyTypeDesc"}],c=[{text:"其他过敏源名称",value:"Name"},{text:"录入日期",value:"InputTime",formatter:s["a"]},{text:"开始日期",value:"StartTime",formatter:s["a"]},{text:"过敏类型",value:"AllergyTypeDesc"}],l=[{text:"IDM",value:"IdmId"},{text:"药品名称",value:"MedicineName"},{text:"症状",value:"Symptom"},{text:"严重程度",value:"SeverityTypeDesc"},{text:"发生日期",value:"StartTime",formatter:s["a"]}],u=[{text:"过敏项目名称",value:"Name"},{text:"皮试日期",value:"SkinTestTime",formatter:s["a"]},{text:"开始日期",value:"StartTime",formatter:s["a"]},{text:"结束日期",value:"EndTime",formatter:s["a"]},{text:"过敏类别",value:"AllergyCategory"},{text:"过敏类型",value:"AllergyType"}],d=[{text:"时间",value:"time"},{text:"体温",value:"T"},{text:"哭声",value:"ku"},{text:"肤色",value:"fuse"},{text:"呼吸",value:"huxi"},{text:"反应",value:"fanyin"},{text:"呕吐",value:"ot"},{text:"脐带",value:"qd"},{text:"小便",value:"xb"},{text:"其他",value:"qt"},{text:"签名",value:"qm"}],p=[{text:"",value:"none"},{text:"Hoffmann",value:"Hoffmann"},{text:"Rossolimo",value:"Rossolimo"},{text:"Babinski",value:"Babinski"},{text:"Chaddock",value:"Chaddock"},{text:"髌阵挛",value:"b"},{text:"踝阵挛",value:"luo"}],h=[{text:"GCS评分",value:"grade"},{text:"睁眼反应",value:"eyes",width:"100px"},{width:"100px",text:"语言反应",value:"language"},{width:"100px",text:"运动反应",value:"sports"},{text:"总分",value:"allCount"}],m=[{width:"100px",text:"项目",value:"items"},{width:"150px",text:"参考值",value:"referenceValue"},{width:"150px",text:"测量值",value:"measuredValue"}],f=[{text:"体征记录",value:"Content",width:"450"},{text:"护士",value:"UpdateUserName"},{text:"记录时间",value:"UpdateTime",formatter:s["a"]}],v=[{text:"护理记录",value:"Content",width:"450"},{text:"护士",value:"护士签名"},{text:"记录时间",value:"Time"}],g=(s["a"],[{text:"报告号",value:"ReportNo"},{text:"检查项目",value:"ReportCategoryName"},{text:"检查结果",value:"Content",width:"250"},{text:"申请人",value:"ApplyName",maxWidth:"80px"},{text:"申请时间",value:"ApplyTime",width:"100",formatter:s["a"]}]),x=[{text:"报告号",value:"ReportNo"},{text:"检验项目",value:"ReportCategoryName"},{text:"标本",value:"Sample"},{text:"申请人",value:"ApplyName",width:"70"},{text:"申请时间",value:"ApplyTime",width:"100",formatter:s["a"]},{text:"危急值",value:"CrisisFlag",maxWidth:"70"}],I=[{text:"项目",value:"ItemName"},{text:"结果",value:"ItemValue"},{text:"提示",value:"Flag",formatter:function(t){return 1===t?"↓":2===t?"↑":""}},{text:"单位",value:"Unit"},{text:"参考范围",value:"Range",maxWidth:"100"},{text:"检测方法",value:"lookOver"},{text:"趋势图",value:"operation"}],D=[{text:"项目",value:"adviceName"},{text:"频次",value:"Frequency"}],T=[{text:"膳食项目",value:"adviceName"},{text:"频次",value:"Frequency"},{text:"剂量",value:"Unit"},{text:"单价",value:"Price",maxWidth:70,formatter:function(t){return(+t).toFixed(2)}}],b=[{text:"护理项目",value:"adviceName"},{text:"频次",value:"Frequency"},{text:"单价",value:"Price",maxWidth:70,formatter:function(t){return(+t).toFixed(2)}}],w=[{text:"检查项目",value:"adviceName"},{text:"是否是医保",value:"InsuranceUseFlag"},{text:"费用",value:"Price",formatter:function(t){return(+t).toFixed(2)}}],C=[{text:"检验项目",value:"adviceName"},{text:"标本",value:"SampleCode"},{text:"标本说明",value:"Attention",editType:"text"},{text:"是否是医保",value:"InsuranceUseFlag"},{text:"费用",value:"Price",maxWidth:70,formatter:function(t){return(+t).toFixed(2)}}],y=[{text:"治疗项目",value:"adviceName"},{text:"频次",value:"Frequency"},{text:"数量",value:"Unit"},{text:"单价",value:"Price",maxWidth:70,formatter:function(t){return(+t).toFixed(2)}}],_=[{text:"药品名称",value:"adviceName",width:180},{text:"剂量",value:"specimen",width:80},{text:"数量",value:"remarks",width:30},{text:"自备药",value:"IsSelfProvided",editType:"switch",width:30},{text:"皮试",value:"IsSkinTest",editType:"switch",width:30},{text:"审",value:"ReimbursementType",editType:"switch",width:30},{text:"单价",value:"Price",maxWidth:80,formatter:function(t){return(+t).toFixed(2)}},{text:"是否是医保",value:"InsuranceUseFlag",maxWidth:100},{text:"医保限制说明",value:"Memo",maxWidth:105}],k=[{text:"用血方式",value:"BloodWay",editType:"select",options:[{Text:"要求1",Value:1},{Text:"要求2",Value:2}]},{text:"用血要求",value:"Alias"},{text:"用量",value:"remarks"}];i["b"]},"386d":function(t,e,a){"use strict";var i=a("cb7c"),s=a("83a1"),n=a("5f1b");a("214f")("search",1,function(t,e,a,r){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var o=i(t),c=String(this),l=o.lastIndex;s(l,0)||(o.lastIndex=0);var u=n(o,c);return s(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]})},"45c1":function(t,e,a){},"470d":function(t,e,a){},"51b8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"app-main"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view",{key:t.key,staticClass:"view"})],1)],1)},s=[],n={name:"appMain",computed:{key:function(){return this.$route.fullPath}}},r=n,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"5f9f":function(t,e,a){"use strict";var i=a("45c1"),s=a.n(i);s.a},"6ff3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{attrs:{"default-active":t.$route.path,collapse:!!t.isDoCollapse&&t.collapse,"background-color":"#fff","text-color":"#8599C0","active-text-color":"#ffffff","collapse-transition":!0,mode:"vertical"}},t._l(t.navList,function(t){return a("sidebar-item",{key:t.UiRouter,attrs:{item:t}})}),1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-wrapper"},[t.item.Children.length>0?a("el-submenu",{ref:"subMenu",attrs:{index:t.item.UiRouter,"popper-append-to-body":""}},[a("template",{slot:"title"},[t.item.Icon?a("svg-icon",{staticClass:"wh20 ",attrs:{iconClass:t.item.Icon}}):t._e(),a("span",{staticClass:"left14"},[t._v(t._s(t.item.Name))])],1),t._l(t.item.Children,function(t){return a("sidebar-item",{key:t.UiRouter,staticClass:"nest-menu",attrs:{"is-nest":!0,item:t}})})],2):a("router-link",{attrs:{to:{name:t.item.UiRouter,query:Object.assign({},t.$route.query)},"active-class":"color"},nativeOn:{click:function(e){t.clickLink(t.item.UiRouter)}}},[a("el-menu-item",{attrs:{index:t.item.UiRouter}},[t.item.Icon?a("svg-icon",{staticClass:"wh20",attrs:{iconClass:t.item.Icon}}):t._e(),a("span",{staticClass:"left14",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.Name))])],1)],1)],1)},r=[],o=a("be94"),c={name:"SidebarItem",props:{item:{type:Object,required:!0}},methods:{clickLink:function(t){var e=Object(o["a"])({},this.$route.query);e.t=+new Date,this.$router.push({name:t,query:e})}}},l=c,u=a("2877"),d=Object(u["a"])(l,n,r,!1,null,null,null),p=d.exports,h={name:"sidebar",props:{navList:{type:Array,default:[]},isDoCollapse:{type:Boolean,default:!0}},components:{sidebarItem:p},computed:{collapse:function(){return this.$store.getters["public/GET_COLLAPSE"]}}},m=h,f=(a("d82a"),Object(u["a"])(m,i,s,!1,null,null,null));e["a"]=f.exports},"73e8":function(t,e,a){},7836:function(t,e,a){},"7f09":function(t,e,a){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"88a3":function(t,e,a){},"9a9d":function(t,e,a){"use strict";var i=a("f410"),s=a.n(i);s.a},aa85:function(t,e,a){"use strict";var i=a("470d"),s=a.n(i);s.a},ab81:function(t,e,a){"use strict";var i=function(t,e){var i=e._c;return i("div",{staticClass:"patient-info-other cl",class:{showGray:e.props.isGray}},[i("div",{class:{new:e.props.info.IsNew&&e.props.isShiftDuty}}),1==e.props.info.PatGenderCode?i("img",{attrs:{src:a("09ce"),alt:""}}):2==e.props.info.PatGenderCode?i("img",{attrs:{src:a("2b48"),alt:""}}):i("img",{attrs:{src:a("9e4e"),alt:""}}),i("div",{staticClass:"content"},[i("div",{staticClass:"content-top clearfix"},[e.props.info.BedNo?[i("span",[e._v(e._s(e.props.info.BedNo))]),i("span",{staticClass:"bed"},[e._v("床")])]:e._e(),e.props.isShiftDuty?i("div",{staticClass:"rightShiftDuty"},[e.props.info.IsPeril?i("span",{staticClass:"wei"}):e._e(),e.props.info.IsHeavy?i("span",{staticClass:"zhong"}):e._e(),e.props.info.IsOperation?i("span",{staticClass:"shu"}):e._e()]):i("svg-icon",{staticClass:"right",attrs:{iconClass:"level"+e.props.info.TriageLevel}})],2),i("div",{staticClass:"content-center clearfix"},[i("span",{staticClass:"name"},[e._v(e._s(e.props.info.PatientName))]),i("span",[e._v("/"+e._s(e._f("ageFilter")(e.props.info.AgeYear,e.props.info.AgeMonth)))])]),i("div",{staticClass:"content-bottom clearfix"},[2==e.props.docMedicalCar?[i("span",{staticClass:"title"},[e._v("病历号:")]),i("span",{staticClass:"number-content"},[e._v(e._s(e.props.info.RecordNumber))])]:e._e(),0==e.props.docMedicalCar?[i("span",{staticClass:"title"},[e._v("PID:")]),i("span",[e._v(e._s(e.props.info.HISPatientId))])]:e._e(),1==e.props.docMedicalCar?[i("span",{staticClass:"title"},[e._v("卡号:")]),i("span",{staticClass:"number-content"},[e._v(e._s(e.props.info.CardNumber))])]:e._e()],2),e.props.isShiftDuty?i("div",{staticClass:"content-bottom clearfix"},[i("span",{staticClass:"name"},[e._v("责任医生:")]),i("span",[e._v(e._s(e.props.info.DoctorName))])]):e._e()])])},s=[],n=(a("5f9f"),a("2877")),r={},o=Object(n["a"])(r,i,s,!0,null,"151d391d",null);e["a"]=o.exports},c135:function(t,e,a){"use strict";var i=a("7836"),s=a.n(i);s.a},d1c8:function(t,e,a){"use strict";var i=a("88a3"),s=a.n(i);s.a},d82a:function(t,e,a){"use strict";var i=a("f92a"),s=a.n(i);s.a},daae:function(t,e,a){"use strict";var i=a("e92f"),s=a.n(i);s.a},deb8:function(t,e,a){"use strict";var i=a("7f09"),s=a.n(i);s.a},e134:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{staticClass:"layout-left",class:{isCollapse:t.collapse}},[a("sidebar",{attrs:{navList:t.navData}}),t.collapse?a("div",{key:"1",staticClass:"layout-left-tool cl"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"hover","popper-class":"menu"}},[a("ul",{on:{click:t.selectHelper}},t._l(t.helperMenuList,function(e,i){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.Status,expression:"item.Status"}],key:i},[a("svg-icon",{staticClass:"icon",attrs:{iconClass:e.MenuIcon}}),a("span",[t._v(t._s(e.MenuName))])],1)}),0),a("span",{staticClass:"item",attrs:{slot:"reference"},slot:"reference"},[a("svg-icon",{staticClass:"icon",attrs:{iconClass:"addHelper"}})],1)])],1):a("div",{key:"2",staticClass:"layout-left-tool cl"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"hover","popper-class":"menu"}},[a("ul",{on:{click:t.selectHelper}},t._l(t.helperMenuList,function(e,i){return a("li",{key:i},[a("svg-icon",{staticClass:"icon",attrs:{iconClass:e.MenuIcon}}),a("span",[t._v(t._s(e.MenuName))])],1)}),0),a("span",{staticClass:"item",attrs:{slot:"reference"},slot:"reference"},[a("svg-icon",{staticClass:"icon",attrs:{iconClass:"addHelper"}})],1)])],1)],1),a("app-main"),a("patient-list",{class:{hide:t.isShowList}}),a("span",{staticClass:"collapse",class:{left65:t.collapse},on:{click:t.checked}},[a("svg-icon",{staticClass:"icon",attrs:{iconClass:t.collapse?"expanded":"fewer"}})],1),a("my-alter",{attrs:{title:t.alterData.title,visible:t.reportShow,isfooter:!1,width:t.alterData.width,callback:t.closeDialog}},[a(t.alterData.component,{ref:"content",tag:"component",attrs:{initialize:t.reportShow,patientData:t.patientMsg}})],1)],1)},n=[],r=a("ade3"),o=(a("28a5"),a("be94")),c=a("6ff3"),l=a("51b8"),u=a("2f62"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"patient-list"},[a("div",{staticClass:"top"},[a("el-input",{attrs:{placeholder:3===t.selectArea.DiagnosisAreaType?"姓名/ID号/卡号/病历号":"姓名/ID号/床位号/卡号/病历号"},on:{input:function(e){t.searchList()}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.searchClick()}},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}},[a("i",{staticClass:"el-input__icon search",attrs:{slot:"suffix"},on:{click:function(e){t.searchClick()}},slot:"suffix"})])],1),a("el-radio-group",{staticClass:"patient-list-nav",class:{two:2==t.navData.length},on:{change:t.searchClick},model:{value:t.acitive,callback:function(e){t.acitive=e},expression:"acitive"}},t._l(t.navData,function(e){return a("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.text))])}),1),a("div",{staticClass:"listContent"},[a("pull-to",{staticClass:"msgScroll",on:{"infinite-scroll":t.getPatientsList}},t._l(t.patientInfo,function(e,i){return a("p",{key:e.InHouseId,ref:"checkBox",refInFor:!0,staticClass:"patientInfo",class:{active:t.patientId==e.InHouseId},attrs:{id:e.InHouseId},on:{click:function(a){t.check(e,i)}}},[a("patient-info-other",{attrs:{info:e,docMedicalCar:t.docMedicalCar}})],1)}),0)],1)],1)},p=[],h=(a("7f7f"),a("96cf"),a("1da1")),m=(a("a481"),a("ac6a"),a("ab81")),f=a("c9b7"),v=a("897d"),g=a.n(v),x=a("5d2d"),I={components:{patientInfoOther:m["a"],PullTo:g.a},computed:Object(o["a"])({},Object(u["b"])({selectArea:"home/GET_SELECTAREA",updatePatientList:"public/GET_UPDATEPATIENTLIST",user:"public/GET_USER",docMedicalCar:"configuration/GET_DOCMEDICALCAR"}),{departmentCode:function(){var t=this.$store.getters["public/GET_USER"],e=[];return t&&t.Departments.forEach(function(t){e.push(t.Code.replace(/ /g,""))}),e},patientId:function(){return this.$route.query.id}}),watch:{updatePatientList:function(t){this.pageIndex=1,this.getPatientsList()}},data:function(){return{searchData:"",acitive:1,isShow:!0,pageIndex:1,navData:[],patientInfo:[],bottomConfig:{pullText:"上拉加载",triggerText:"释放更新",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:50,triggerDistance:70}}},created:function(){this.debouceElg=Object(f["g"])(this.searchClick,500),3==this.selectArea.DiagnosisAreaType?(this.navData=[{text:"待接诊",value:"ClinicNotReception"},{text:"就诊中",value:"ClinicInReception"},{text:"就诊结束",value:"ClinicEndReception"}],this.acitive="ClinicInReception"):(this.navData=[{text:"全部",value:-1},{text:"重点关注",value:1}],this.acitive=-1),this.getPatientsList()},methods:{getPatientsList:function(){var t,e,a=this;this.pageIndex<1||(3===this.selectArea.DiagnosisAreaType?(e="getClinicPatient",t={QueryType:this.acitive,DiagnosisAreaType:this.selectArea.DiagnosisAreaType,JustMe:!1,PageIndex:this.pageIndex,PageSize:10,Deps:this.departmentCode,UserId:this.user.UserInfo.Id},this.searchData&&(t.QueryKey=this.searchData)):(e="getPatientsList",t={diagnosisAreaType:this.selectArea.DiagnosisAreaType,attentionTag:this.acitive,pageSize:10,pageIndex:this.pageIndex,isAsc:!0},this.searchData&&(t.keyWord=this.searchData)),this.$Api[e](t).then(function(t){if(t.Status){var e=t.Data||[];e.forEach(function(t){if(0===t.Status){var e=t.BirthDay;if(e){e="".concat(e.slice(0,4),"/").concat(e.slice(4,6),"/").concat(e.slice(6,8));var a=Object(f["d"])(e);t.AgeYear=+a.year,a.month&&(t.AgeMonth=a.month+""),a.day&&(a.month?t.AgeMonth=t.AgeMonth+"*"+a.day+"/30":t.AgeMonth=a.day+"/30")}}}),3===a.selectArea.DiagnosisAreaType&&e.forEach(function(t){t.InHouseId="ClinicNotReception"===a.acitive?t.PatientId+t.TriageId+t.HisRegisterId:t.Id,t.AreaType=3});var i=Math.ceil(t.Count/10);1===a.pageIndex?a.patientInfo=e:a.pageIndex<=i&&(a.patientInfo=a.patientInfo.concat(e)),t.Count<=10*a.pageIndex?a.pageIndex=-1:a.pageIndex++}else a.patientInfo=[]}))},searchClick:function(){this.pageIndex=1,this.getPatientsList()},check:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(e,a,i){var s,n,r,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("ClinicNotReception"!==this.acitive||3!==this.selectArea.DiagnosisAreaType){t.next=23;break}return s={TriageId:e.TriageId,ActiveRegistId:e.ActiveRegistId},t.prev=2,t.next=5,this.$Api.getPersonMessageById(s);case 5:n=t.sent,n.Status&&n.Data&&n.Data.length&&(row=n.Data[0]),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0,"error");case 12:return console.log("接诊"),t.next=15,this.patReceive(e.TriageId,e.PatientId,e.ActiveRegistId,e.DepartmentCode,e.TriageLevel);case 15:if(r=t.sent,!r.Status){t.next=21;break}e.InHouseId=r.Data,this.patientInfo.splice(a,1),t.next=23;break;case 21:return this.$msg.warning(r.Message),t.abrupt("return");case 23:if(c=this.$route,e.AreaType=e.AreaType||this.selectArea.DiagnosisAreaType,Object(x["e"])("currentPat",{currentPat:e}),c.query.id!==e.InHouseId){t.next=28;break}return t.abrupt("return");case 28:this.$store.commit("public/SET_PATIENTMSG",e),this.$router.push({name:c.name,query:Object(o["a"])({},c.query,{id:e.InHouseId})});case 30:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e,a,i){return t.apply(this,arguments)}return e}(),patReceive:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(e,a,i,s,n){var r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(r),t.abrupt("return",this.$Api.patReceive({triageId:e,patientId:a,registerId:i,departmentCode:s,triageLevel:n}));case 2:case"end":return t.stop()}},t,this)}));function e(e,a,i,s,n){return t.apply(this,arguments)}return e}(),searchList:function(){this.debouceElg()}}},D=I,T=(a("d1c8"),a("2877")),b=Object(T["a"])(D,d,p,!1,null,"7c00fc02",null),w=b.exports,C=a("98ad"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"read-report"},[a("div",{staticClass:"tabs-temp"},[a("el-input",{ref:"search",staticClass:"search"}),a("el-radio-group",{attrs:{fill:"#0071e7"},on:{change:t.tapsExamine},model:{value:t.nowTemp,callback:function(e){t.nowTemp=e},expression:"nowTemp"}},t._l(t.tabsTemp,function(e,i){return a("el-radio-button",{key:i,attrs:{label:e.Value}},[t._v(t._s(e.Text))])}),1)],1),a("div",{staticClass:"left"},[1==t.nowTemp?a("div",{staticClass:"now-report"},[t.nowData.length?a("div",{staticClass:"now-list"},t._l(t.nowData,function(e,i){return a("div",{key:i,staticClass:"now-item",on:{click:function(a){t.lookReport(e,i)}}},[a("span",{staticClass:"type",class:{"icon-inspect":"检查"===e.ReportType,"icon-test":"检验"===e.ReportType}}),a("div",{staticClass:"typeContent",class:{active:e.ReportNo==t.nowSelectId}},[a("span",[t._v(t._s(t._f("timeFilter")(e.ReportDate)))]),a("span",[t._v(t._s(e.ReportCategoryName))]),a("span",[t._v(t._s(e.UserName))])])])}),0):a("div",{staticClass:"dataNull"},[t._v("暂无数据")])]):a("div",{staticClass:"history-report"},[t.hisParentData.length?a("el-collapse",{attrs:{accordion:""},on:{change:t.changeData},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.hisParentData,function(e,i){return a("el-collapse-item",{key:i,attrs:{name:""+i}},[a("template",{slot:"title"},[a("div",{staticClass:"title"},[a("span",[t._v(t._s(t._f("timeFilter")(e.InHospTime)))]),a("span",[t._v(t._s(e.ReportCategoryName))]),a("span",[t._v(t._s(e.AreaName))])])]),t._l(t.hisData,function(e){return a("div",{key:e.ReportNo,staticClass:"his-item",on:{click:function(a){t.lookReport(e)}}},[a("span",{staticClass:"type",class:{"icon-inspect":"检查"===e.ReportType,"icon-test":"检验"===e.ReportType}}),a("div",{staticClass:"typeContent",class:{active:e.ReportNo==t.nowSelectId}},[a("span",[t._v(t._s(t._f("timeFilter")(e.ReportDate)))]),a("span",[t._v(t._s(e.ReportCategoryName))]),a("span",[t._v(t._s(e.UserName))])])])})],2)}),1):a("div",{staticClass:"dataNull"},[t._v("暂无数据")])],1),a("el-radio-group",{staticClass:"bottom",on:{change:t.changeCondition},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:0}},[t._v("全部报告")]),a("el-radio",{attrs:{label:1}},[t._v("检查报告")]),a("el-radio",{attrs:{label:2}},[t._v("检验报告")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ifarmSrc,expression:"ifarmSrc"}],staticClass:"warp",on:{click:t.showTable}},[t._v(t._s(t.show?"数据趋势":"报告详情"))]),a("div",{staticClass:"right"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showLoading,expression:"showLoading"},{name:"show",rawName:"v-show",value:t.show&&t.ifarmSrc,expression:"show &&ifarmSrc"}],staticClass:"content-center ifarme",attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, .6)"}},[a("iframe",{attrs:{height:"100%",src:t.ifarmSrc,width:"100%",frameborder:"0",id:"ifra"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"table"},["检验"==t.currentSelectedItem.ReportType&&t.testDataDetail.length?a("simpleTable",{attrs:{tableData:t.testDataDetail,isSelect:!1,"row-key":"Id",indexLable:"序号",columns:t.columns},scopedSlots:t._u([{key:"operation",fn:function(e){var i=e.scope;return a("div",{},[a("el-button",{attrs:{type:"text",size:"mini",disabled:!i.row.ItemValue.match("^[-+]?[0-9]*.?[0-9]+$")},on:{click:function(e){t.testDataTrendGet(i.row)}}},[t._v("查看")])],1)}}])}):a("p",[t._v("检查结论："+t._s(t.checkDataDetail))])],1)]),a("my-alter",{attrs:{title:t.dialogData.title,width:t.dialogData.width,visible:t.dialogData.showAlter,callback:t.closeDialog,isfooter:!1}},[a("echarts",{staticStyle:{"padding-bottom":"30px"},attrs:{echartsData:t.testTrendData,type:"trend",width:"100%"}})],1)],1)},_=[],k=(a("386d"),a("7514"),a("33ae")),R=a("2e7f"),S=a("ad0b"),L={name:"readReport",components:{simpleTable:k["a"],myAlter:C["a"],echarts:S["a"]},data:function(){return{columns:R["r"],tableData:[],nowTemp:1,radio:0,activeName:"0",tabsTemp:[{Text:"当前报告",Value:1},{Text:"历史报告",Value:2}],show:!0,nowData:[],hisData:[],hisParentData:[],nowSelectId:"",currentSelectedItem:{},ifarmSrc:"",showLoading:!0,index:0,testDataDetail:[],checkDataDetail:"",testTrendData:[],dialogData:{showAlter:!1,title:"趋势图",width:"1262px"}}},props:{initialize:!1},watch:{initialize:{handler:function(t,e){t?(this.nowTemp=1,this.show=!0,this.radio=0,this.ifarmSrc="",this.currentSelectedItem={},this.showLoading=!1,this.getNowReportData()):f["b"].clear()},immediate:!0}},mounted:function(){},beforeDestroy:function(){f["b"].clear()},computed:Object(o["a"])({},Object(u["b"])({patientMsg:"public/GET_PATIENTMSG",user:"public/GET_USER",reportConfig:"public/GET_REPORTCONFIG"})),methods:{closeDialog:function(t){this.dialogData.showAlter=!1},testDataTrendGet:function(t){var e=this;console.log(t,"行标题"),this.dialogData.showAlter=!0,this.dialogData.title=t.ItemName+"近30天趋势图";var a={HisPatientId:this.patientMsg.HISPatientId,ItemCode:t.ItemCode,ReportDate:t.ReportDate};this.$Api.getTestItemTrend(a).then(function(t){t.Status?e.testTrendData=t.Data:e.$msg.warning(t.Message)})},changeCondition:function(t){this.ifarmSrc="",this.testDataDetail=[],this.checkDataDetail="",2===this.nowTemp?this.getWarpList(t):this.getNowReportData(t)},tapsExamine:function(t){this.show=!0,this.ifarmSrc="",this.testDataDetail=[],this.checkDataDetail="",2===t?this.getWarpList():this.getNowReportData()},showTable:function(){this.show=!this.show},getNowReportData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.radio;this.$Api.getReportNowListNew({HisPatientId:this.patientMsg.HISPatientId,ReportType:e,PatientId:this.patientMsg.PatientId}).then(function(e){e.Status&&(t.nowData=e.Data||[],t.nowSelectId=e.Data[0]?e.Data[0].ReportNo:"",e.Data[0]&&(t.lookReport(e.Data[0],0),console.log(t.nowData)))})},getHisReportContentData:function(t){var e=this;this.$Api.getReportHisContentNew({HisPatientId:this.patientMsg.HISPatientId,ReportType:this.radio,PatientId:this.patientMsg.PatientId,InHospTime:t.InHospTime,OutHospTime:Object(f["a"])("",new Date(+new Date(t.OutHospTime)+3456e5))}).then(function(t){t.Status&&(e.hisData=t.Data||[],e.nowSelectId=t.Data[0]?t.Data[0].ReportNo:"",t.Data[0]&&e.lookReport(t.Data[0],0)),console.log(t)})},getWarpList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.radio;this.$Api.getReportHisListNew({HisPatientId:this.patientMsg.HISPatientId,ReportType:e,PatientId:this.patientMsg.PatientId}).then(function(e){e.Status&&(t.hisParentData=e.Data,t.hisParentData&&t.hisParentData.length>0&&t.getHisReportContentData(t.hisParentData[0]))})},changeData:function(t){t&&this.getHisReportContentData(this.hisParentData[t])},lookReport:function(t,e){var a=this;this.nowSelectId=t.ReportNo,this.currentSelectedItem=t,console.log(t,"item"),this.ifarmSrc="",this.showLoading=!0;var i=+new Date,s=this.reportConfig.find(function(e){return e.ReportTypeCode==t.Replb.trim()});if(void 0==s){if(!t.IP)return this.showLoading=!1,this.$msg.warning("该报告无报告地址");-1==t.IP.indexOf("?")&&(t.IP+="?"),this.ifarmSrc=t.IP+"repno="+t.ReportNo+"&reptypeno="+t.Replb.trim()+"&HospitalCode="+this.user.UserInfo.HospitalCode+"&t="+i}else{-1==s.ReportUrl.indexOf("?")&&(s.ReportUrl+="?");var n=s.ReportSuffix,r=n.replace("@ReportNo",t.ReportNo).replace("@PatientName",this.patientMsg.PatientName).replace("@ReportType",t.Replb.trim()).replace("@HisPatientId",this.patientMsg.HISPatientId).replace("@HisRecordNumber",this.patientMsg.RecordNumber);this.ifarmSrc=s.ReportUrl+r+"&t="+i}console.log(this.ifarmSrc),this.index=e;var o=document.querySelector("#ifra");o.onload=function(){console.log("iframe加载完成"),f["b"].clear(),f["b"].track(document.getElementById("ifra"),a.openIE),a.showLoading=!1};var c={reportNo:t.ReportNo};"检查"==t.ReportType||"6  "==t.ReportType?this.$Api.getCheckResultByReportId(c).then(function(t){t.Status?a.checkDataDetail=t.Data?t.Data.ResultDesc:"":(a.$msg.warning(t.Message),a.checkDataDetail="")}):"检验"!=t.ReportType&&"17  "!=t.ReportType||this.$Api.getTestResultByReportId(c).then(function(t){t.Status?a.testDataDetail=t.Data||[]:(a.$msg.warning(t.Message),a.testDataDetail=[])})},openIE:function(){var t=this;this.$Api.openIE(this.ifarmSrc.replace(/&/g,"$")).then(function(e){console.log(e,"打开IE"),t.$refs.search.focus()})}}},A=L,N=(a("c135"),Object(T["a"])(A,y,_,!1,null,"15a972f1",null)),E=N.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"viewReportAlter"},[a("el-radio-group",{attrs:{fill:"#0071E7"},on:{change:t.getList},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabsData,function(e,i){return a("el-radio-button",{key:i,attrs:{label:e.value}},[t._v(t._s(e.text))])}),1),a("div",{staticClass:"viewReportAlter-content my-input-time"},[a("fileHandleList",{directives:[{name:"show",rawName:"v-show",value:3===t.activeName,expression:"activeName===3"}],ref:"fileHandleList",attrs:{patientData:t.patientData}}),3!==t.activeName?a("areaTimerShaft",{attrs:{timeChick:t.timeChick,checked:t.checked,activeId:t.checkObj.Id,phaseData:t.phaseData}}):t._e(),a("div",{staticClass:"list-right"},[a("div",{staticClass:"flex-between inquire"},[a("div",{staticClass:"search-left"},[2===t.activeName?[a("span",[t._v("时间")]),a("el-date-picker",{attrs:{"prefix-icon":"el-icon-date",type:"date",clearable:!1,size:"small","picker-options":t.pickerOptions,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.setTimeArr(t.endTime)}}},[t._v("查询")])]:t._e()],2),a("div",{staticClass:"print flex-between"},[2===t.activeName?[a("el-button",{staticClass:"btn",attrs:{plain:"",disabled:0==t.currentIndex},on:{click:function(e){t.prePage(0)}}},[t._v("首页")]),a("el-button",{staticClass:"btn",attrs:{plain:"",disabled:0==t.currentIndex},on:{click:function(e){t.prePage(t.currentIndex-1)}}},[t._v("上一页")]),a("el-button",{staticClass:"btn",attrs:{plain:"",disabled:t.currentIndex==t.sevenTimeArr.length-1},on:{click:function(e){t.prePage(t.currentIndex+1)}}},[t._v("下一页")]),a("el-button",{staticClass:"btn",attrs:{plain:"",disabled:t.currentIndex==t.sevenTimeArr.length-1},on:{click:function(e){t.prePage(t.sevenTimeArr.length-1)}}},[t._v("末页")]),a("el-button",{staticClass:"btn",attrs:{plain:""},on:{click:t.print}},[t._v("打印")])]:1===t.activeName?[a("el-checkbox",{on:{change:t.change},model:{value:t.isChecked,callback:function(e){t.isChecked=e},expression:"isChecked"}},[t._v("续打模式")]),a("el-tooltip",{attrs:{placement:"top",content:"打印",effect:"light"}},[a("span",{staticClass:"icon-print",on:{click:t.print}})])]:a("el-tooltip",{attrs:{placement:"top",content:"打印",effect:"light"}},[a("span",{staticClass:"icon-print",on:{click:t.print}})])],2)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showLoading,expression:"showLoading"}],ref:"iframeContent",staticClass:"content",attrs:{id:"content","element-loading-text":"拼命加载中","element-loading-background":"rgba(200, 200, 200, 0.6)"}},[a("div",{staticClass:"iframeContent"},[a("iframe",{ref:"iframe",staticClass:"iframeStyle",attrs:{src:t.iframeSrc,scrolling:"yes",frameborder:"0"}})])])])],1)],1)},P=[],M=function(t,e){var a=e._c;return a("div",{staticClass:"area-timer-shaft cl"},[a("div",{staticClass:"area-timer-shaft-header"},[a("el-checkbox",{attrs:{value:e.props.checked},on:{change:e.props.timeChick}},[e._v("区域记录合并")])],1),a("div",{staticClass:"phase"},e._l(e.props.phaseData,function(t,i){return a("div",{key:t.Id,staticClass:"phase-item"},[i===e.props.phaseData.length-1?a("div",{staticClass:"phase-current"}):e._e(),a("div",{staticClass:"phase-dot",class:"bg"+t.TargetAreaType}),a("div",{staticClass:"phase-card",class:{active:e.props.activeId===t.Id},on:{click:function(a){e.props.timeChick(t)}}},[a("div",{staticClass:"phase-name"},[e._v(e._s(t.TargetAreaName))]),a("div",{staticClass:"start-time"},[a("span",[e._v("入区:")]),e._v("\n          "+e._s(e._f("timeFilter")(t.StartTime))+"\n        ")]),a("div",{staticClass:"end-time"},[a("span",[e._v("出区:")]),e._v("\n          "+e._s(e._f("timeFilter")(t.EndTime))+"\n        ")])]),i===e.props.phaseData.length-1?a("span",{staticClass:"icon el-icon-caret-bottom"}):e._e()])}),0)])},j=[],H=(a("deb8"),{}),$=Object(T["a"])(H,M,j,!0,null,"22ccdbfc",null),U=$.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fileHandleList"},[a("el-tabs",{on:{"tab-click":function(e){t.handleClick(t.currentType)}},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},[a("el-tab-pane",{attrs:{label:"护理文书",name:"1"}},[a("div",{staticClass:"treeAll"},t._l(t.docList,function(e,i){return a("tree",{key:i,attrs:{activeItem:t.currentLeafId,treeData:e,selectLeaf:t.selectLeaf,type:"1"}})}),1)]),a("el-tab-pane",{attrs:{label:"护理评估",name:"2"}},[a("div",{staticClass:"treeAll"},t._l(t.evaluList,function(e,i){return a("tree",{key:i,attrs:{activeItem:t.currentLeafId,treeData:e,selectLeaf:t.selectLeaf,type:"2"}})}),1)])],1)],1)},F=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree"},[a("div",{staticClass:"title"},[a("div",{staticClass:"tt",on:{click:t.handleTree}},[t.showLeaf?a("span",{staticClass:"el-icon-caret-bottom"}):a("span",{staticClass:"el-icon-caret-right"}),"1"===t.type?a("span",{staticClass:"treeTitle"},[t._v(t._s(t.treeData.CategoryName)+" （ "+t._s(t.treeData.DocList.length)+" ）")]):a("span",{staticClass:"treeTitle"},[t._v(t._s(t.treeData.CategoryName)+" （ "+t._s(t.treeData.AssList.length)+" ）")])])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeaf,expression:"showLeaf"}],staticClass:"infos"},["1"===t.type?a("div",t._l(t.treeData.DocList,function(e,i){return a("div",{key:e.DocId,ref:"leaf",refInFor:!0,staticClass:"info",class:{active:t.activeItem===e.DocId},attrs:{id:e.DocId,name:"leaf"},on:{click:function(a){t.selectLeaf(e.DocId,t.type,e.Number)}}},[a("div",{staticClass:"infoDetail"},[a("div",{staticClass:"info1"},[a("div",[t._v(t._s(e.DocName))])]),a("div",{staticClass:"info2"},[t._v(t._s(t._f("timeFilter")(e.CreateTime)))])])])}),0):a("div",t._l(t.treeData.AssList,function(e,i){return a("div",{key:i,ref:"leaf",refInFor:!0,staticClass:"info",class:{active:t.activeItem===e.DocId},attrs:{id:e.DocId,name:"leaf"},on:{click:function(a){t.selectLeaf(e.DocId,t.type,e.Number)}}},[a("div",{staticClass:"infoDetail"},[a("div",{staticClass:"info1"},[a("div",[t._v(t._s(e.AssName))])]),a("div",{staticClass:"info2"},[t._v(t._s(t._f("timeFilter")(e.CreateTime)))])])])}),0)])])],1)},q=[],B={props:{treeData:{type:Object,default:function(){return{}}},selectLeaf:{type:Function,default:function(){return{}}},activeItem:{type:String,default:""},type:{type:String,default:function(){return"1"}}},data:function(){return{showLeaf:!0}},methods:{handleTree:function(){this.showLeaf=!this.showLeaf}}},V=B,z=(a("aa85"),Object(T["a"])(V,W,q,!1,null,"a9358bc4",null)),J=z.exports,Q={name:"fileHandleList",components:{tree:J},props:{patientData:{type:Object,required:!0}},data:function(){return{currentLeafId:"",currentType:"1",docList:[],evaluList:[]}},created:function(){},methods:{getDocList:function(t){var e=this;this.patientData.InHouseId&&this.$Api.getDocList({inHospPatId:this.patientData.InHouseId}).then(function(a){if(e.docList=a.Data||[],t&&e.docList.length){var i=e.docList[0].DocList[0];e.selectLeaf(i.DocId,"1",i.Number)}!a.Status&&e.$msg.warning(a.Message)})},getEvaluList:function(){var t=this;this.patientData.InHouseId&&this.$Api.getEvaluList({inHospPatId:this.patientData.InHouseId}).then(function(e){t.evaluList=e.Data||[],!e.Status&&t.$msg.warning(e.Status)})},selectLeaf:function(t,e,a){this.currentLeafId=t;var i={objectType:e,inHospPatId:this.patientData.InHouseId,pageIndex:a,patientId:this.patientData.PatientId,originUrl:window.location.protocol+"\\"+window.location.host,createUser:this.userId,documentId:t,mark:!0};this.$parent.setIframeUrl(i,"EditPage")},handleClick:function(t,e){console.log("object"),this.currentType=t,"1"===t?this.getDocList(e):this.getEvaluList()}},computed:Object(o["a"])({},Object(u["b"])({user:"public/GET_USER"}),{userId:function(){return this.user.UserInfo.Id}}),watch:{}},Y=Q,K=(a("0c72"),Object(T["a"])(Y,G,F,!1,null,"69998623",null)),X=K.exports,Z={name:"viewReportAlter",components:{areaTimerShaft:U,fileHandleList:X},props:{initialize:!1,patientData:{type:Object,required:!0}},watch:{initialize:{handler:function(t,e){t?(this.getList(1),this.checkAll(!1),window.addEventListener("message",this.refeshPage,!1),this.$store.commit("public/SET_MEDICALADDEVENT",!0)):(clearTimeout(this.timer),window.removeEventListener("message",this.refeshPage,!1),this.$store.commit("public/SET_MEDICALADDEVENT","medicalHistory"===this.$route.name)),this.activeName=1},immediate:!0}},data:function(){return{tabsData:[{text:"护理单",value:1},{text:"体温单",value:2},{text:"护理文书",value:3}],activeName:1,pickerOptions:{disabledDate:this.disabledDate},showLoading:!1,iframeSrc:"",isChecked:!1,checked:!1,checkObj:"",phaseData:[],timeArr:Object(f["m"])(),endTime:new Date,currentIndex:0,sevenTimeArr:[]}},mounted:function(){},beforeDestroy:function(){clearTimeout(this.timer),window.removeEventListener("message",this.refeshPage,!1)},methods:{refeshPage:function(t){var e=this;if(window.parent!==t.source){console.log(t.data,"sds");var a=t.data;"load"===a.type?this.isPrint?(clearTimeout(this.timer),this.domId="iframe-list",this.timer=setTimeout(function(){document.getElementById("iframe-list").contentWindow.postMessage("ismark",window.URLCONFIG.Emr),e.$store.commit("file/SET_ISPRINT",!1)},500)):this.showLoading=!1:"ismark"===a.type&&(clearTimeout(this.timer),a.status?(document.getElementById(this.domId).contentWindow.postMessage("print",window.URLCONFIG.Emr),document.getElementById(this.domId).contentWindow.postMessage("markOut",window.URLCONFIG.Emr)):this.timer=setTimeout(function(){document.getElementById(e.domId).contentWindow.postMessage("ismark",window.URLCONFIG.Emr)},200))}},getList:function(t){this.iframeSrc="",3!==t&&this.checkAll(!1),this.activeName=t,3===t?this.$refs.fileHandleList&&this.$refs.fileHandleList.handleClick("1",!0):this.getPhaseInfo(this.patientData.InHouseId)},change:function(){var t=this.isChecked?"JumpPrintIn":"JumpPrintOut";this.$refs.iframe.contentWindow.postMessage(t,window.URLCONFIG.Emr)},timeChick:function(t){console.log(t),"boolean"===typeof t?this.checkAll(t):this.checkItem(t)},disabledDate:function(t){if(this.checkObj){var e=this.checkObj.EndTime||new Date;return t.getTime()>new Date(e).getTime()||t.getTime()<new Date(Object(f["a"])("yyyy-MM-dd",new Date(this.checkObj.StartTime))+" 00:00:00").getTime()}return!1},checkAll:function(t){if(this.checked=t,t&&this.phaseData.length>0){var e=document.getElementsByClassName("phase-card");this.checkObj=Object(o["a"])({},this.checkObj),this.checkObj.EndTime=this.phaseData[this.phaseData.length-1].EndTime||Object(f["a"])(),this.checkObj.StartTime=this.phaseData[0].StartTime,1===this.activeName?this.setNursingList(this.checkObj,this.checkObj.TargetAreaId):this.setTimeArr(this.checkObj.EndTime);for(var a=0;a<e.length;a++)e[a].classList.add("active")}else if(this.phaseData.length){for(var i=document.getElementsByClassName("phase-card"),s=0;s<i.length-1;s++)i[s].classList.remove("active");this.checkItem(this.phaseData[this.phaseData.length-1])}else this.iframeSrc=""},checkItem:function(t){if(console.log(t),!this.checked){this.checkObj=t;var e=this.checkObj.EndTime||Object(f["a"])();1===this.activeName?this.setNursingList(t,t.TargetAreaId):this.setTimeArr(e)}},print:function(){if(2===this.activeName)this.$refs.iframe.contentWindow.postMessage("TempPrint",window.URLCONFIG.Emr);else if(1===this.activeName){var t=this.isChecked?"JumpPrint":"print";this.$refs.iframe.contentWindow.postMessage(t,window.URLCONFIG.Emr)}else this.$refs.iframe.contentWindow.postMessage("print",window.URLCONFIG.Emr)},setTimeArr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;console.log(t),this.endTime=t;var e=this.getSevenTimeList(this.checkObj.StartTime);this.sevenTimeArr=e;var a=this.getMinMaxTime(this.endTime,e);console.log(a),this.setTemperature(a)},getPhaseInfo:function(t){var e=this;console.log(t,"dssssssss"),this.$Api.getTimerArr({id:t}).then(function(t){if(t.Status)if(e.phaseData=t.Data||[],e.phaseData.length)if(e.checkObj=e.phaseData[e.phaseData.length-1],console.log(e.phaseData,"this.phaseData",e.activeName),1===e.activeName)e.setNursingList(e.phaseData[e.phaseData.length-1],e.phaseData[e.phaseData.length-1].TargetAreaId);else{var a=e.checkObj.EndTime||new Date;e.setTimeArr(a)}else e.iframeSrc="";else e.$msg.warning(t.Message),e.iframeSrc=""})},setNursingList:function(t,e){console.log(t,e);var a={inHospPatId:this.patientData.InHouseId,objectType:3,startDateTime:t.StartTime,endDateTime:t.EndTime,mark:!0,originUrl:window.location.protocol+"\\"+window.location.host,areaId:e,patientId:this.patientData.PatientId,templateId:"8066e545023dc059e1876878a8be6612"};this.setIframeUrl(a,"EditPage")},setTemperature:function(t){var e=Object(f["a"])("yyyy-MM-dd",new Date(t[0]))+" 00:00:00",a=Object(f["a"])("yyyy-MM-dd",new Date(t[1]))+" 23:59:59",i={inHospPatId:this.patientData.InHouseId,objectType:4,originUrl:window.location.protocol+"\\"+window.location.host,triageId:this.patientData.TriageId,startDateTime:e,endDateTime:a};this.setIframeUrl(i,"Temperature")},setIframeUrl:function(t,e){var a=this,i="".concat(window.URLCONFIG.Emr,"/nursing/").concat(e,".aspx?");for(var s in t)i=i+s+"="+t[s]+"&";i=i.substring(0,i.length-1),this.iframeSrc!==i&&(this.iframeSrc="",Object(f["l"])(i).then(function(t){a.iframeSrc=t,a.showLoading=!0,"Temperature"===e&&(a.$refs.iframe.onload=function(t){this.showLoading=!1}.bind(a))}))},getSevenTimeList:function(t){for(var e=[],a=(new Date).getTime(),i=new Date(t).getTime(),s=Math.ceil((a-i)/1e3/604800),n=0;n<s;n++){var r={};r.minTime=i+7*n*24*3600*1e3,r.maxTime=i+7*(n+1)*24*3600*1e3-864e5,e.push(r)}return e},getMinMaxTime:function(t,e){var a=this,i=new Date(t).getTime(),s=0,n=0;return e.forEach(function(t,e){t.minTime<=i&&t.maxTime>=i&&(s=t.minTime,n=t.maxTime,a.currentIndex=e)}),0==s&&0==n?(s=new Date(e[0].minTime),n=new Date(e[0].maxTime)):(s=new Date(s),n=new Date(n)),[Object(f["a"])("yyyy-MM-dd",s)+" 00:00:00",Object(f["a"])("yyyy-MM-dd",n)+" 23:59:59"]},prePage:function(t){console.log(this.sevenTimeArr),this.currentIndex=t,this.setTemperature([this.sevenTimeArr[this.currentIndex].minTime,this.sevenTimeArr[this.currentIndex].maxTime])}}},tt=Z,et=(a("daae"),Object(T["a"])(tt,O,P,!1,null,"e1f56528",null)),at=et.exports,it=a("ab3e"),st=(i={name:"layout",components:{sidebar:c["a"],appMain:l["a"],patientList:w,myAlter:C["a"],readReport:E,viewReportAlter:at},data:function(){return{navData:[]}},computed:Object(o["a"])({},Object(u["b"])({isShowList:"public/GET_ISSHOWLIST",navList:"public/GET_NAVLIST",collapse:"public/GET_COLLAPSE",reportShow:"home/GET_REPORTSHOW",patientMsg:"public/GET_PATIENTMSG",helperMenuList:"public/GET_HELPERSETMENU",alterData:"home/GET_DIALOGDATA",user:"public/GET_USER"}),{doctorDep:function(){for(var t=this.patientMsg.RegisterInfoList||[],e="",a=0;a<t.length;a++)this.patientMsg.RegistId===t[a].HisRegistId&&(e=t[a].RegDepartmentCode);return e}}),watch:{"patientMsg.AreaType":function(t,e){if(!(this.$route.path.indexOf("doctorAdvice")<0||t===e))for(var a=0;a<this.navList.length;a++){var i=this.navList[a];if("doctorAdvice"===i.UiRouter)return void(this.navData=i.Children.filter(function(e){return 3!==t||"patients"!==e.UiRouter}))}}}},Object(r["a"])(i,"watch",{"patientMsg.AreaType":function(t,e){if(!(this.$route.path.indexOf("doctorAdvice")<0||t===e))for(var a=0;a<this.navList.length;a++){var i=this.navList[a];if("doctorAdvice"===i.UiRouter)return void(this.navData=i.Children.filter(function(e){return 3!==t||"patients"!==e.UiRouter}))}}}),Object(r["a"])(i,"methods",{selectHelper:function(t){var e=this;if(t.srcElement){var a,i=t.srcElement.innerText;switch(i){case"报告调阅":a={component:"readReport",width:"1366px",title:i},this.$store.commit("home/SET_DIALOGDATA",a),this.$store.commit("home/SET_REPORTSHOW",!0);break;case"护理病历":a={component:"viewReportAlter",width:"88vw",title:i},this.$store.commit("home/SET_DIALOGDATA",a),this.$store.commit("home/SET_REPORTSHOW",!0);break;case"疾病监测上报":Object(it["a"])({},"http://localhost:10808/api/IDMSReport?yqdm=".concat(this.user.HospitalAreaCode,"&doctorNo=").concat(this.user.UserInfo.No,"&doctorDep=").concat(this.doctorDep,"&ghxh=").concat(this.patientMsg.RegistId)).then(function(t){t.Status||e.$msg.warning(t.Message)});break}}},checked:function(t){this.$store.commit("public/SET_COLLAPSE",!this.collapse)},closeDialog:function(t){this.$store.commit("home/SET_REPORTSHOW",!1)}}),Object(r["a"])(i,"beforeRouteEnter",function(t,e,a){a(function(e){for(var a=t.path.split("/")[1],i=0;i<e.navList.length;i++){var s=e.navList[i];if(a===s.UiRouter)return void(e.navData=s.Children.filter(function(t){return 3!==e.patientMsg.AreaType||"patients"!==t.UiRouter}))}})}),i),nt=st,rt=(a("9a9d"),a("fcaf"),Object(T["a"])(nt,s,n,!1,null,null,null));e["default"]=rt.exports},e92f:function(t,e,a){},efd4:function(t,e,a){},f410:function(t,e,a){},f92a:function(t,e,a){},fcaf:function(t,e,a){"use strict";var i=a("73e8"),s=a.n(i);s.a}}]);